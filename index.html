<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Êµ∑ÊãâÁöÑÈí±ÂåÖ</title>
    <script src="https://unpkg.com/vue@3.4.21/dist/vue.global.js"></script>
    <style>
        /* Âü∫Á°ÄÊ†∑Âºè */
        .gacha-calculator {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: #f5f7fa;
            min-height: 100vh;
        }

        .calculator-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            align-items: start;
        }

        .left-panel, .right-panel {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            color: #333;
            margin-bottom: 15px;
            font-size: 18px;
            user-select: none;
        }

        .section-header:hover {
            color: #1890ff;
        }

        .collapse-icon {
            font-weight: bold;
            font-size: 16px;
            color: #666;
        }

        .section-content {
            margin-top: 10px;
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }

        h2 {
            color: #333;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .sub-section {
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #1890ff;
        }

        .sub-title {
            color: #333;
            margin-bottom: 12px;
            font-size: 16px;
            font-weight: bold;
        }

        /* Â∑¶‰æßÈù¢ÊùøÂõ∫ÂÆöÂÆö‰Ωç */
        .sticky-panel {
            position: sticky;
            top: 20px;
            align-self: flex-start;
        }

        /* ÂΩìÂâçÂ∫ìÂ≠òÂûÇÁõ¥Â∏ÉÂ±Ä */
        .resource-vertical {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 10px;
        }

        .resource-input-vertical {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px;
            background: white;
            border-radius: 6px;
            border: 1px solid #e1e5e9;
        }

        .resource-input-vertical label {
            display: flex;
            align-items: center;
            gap: 5px;
            font-weight: bold;
            color: #555;
            min-width: 120px;
            margin-bottom: 0;
        }

        .resource-input-vertical input {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
            width: 100px;
            text-align: center;
        }

        /* ÁöÆËÇ§È¢ÑÁïô‰∏ÄË°åÊòæÁ§∫ - ‰øÆÊîπÊåâÈîÆÂ∏ÉÂ±Ä */
        .skin-reserve-row {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
        }

        .skin-item.compact {
            display: flex;
            flex-direction: column;
            gap: 10px;
            padding: 12px;
            background: white;
            border-radius: 6px;
            border: 1px solid #e1e5e9;
        }

        .skin-item.compact .skin-info {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .skin-item.compact .skin-price {
            font-weight: bold;
            color: #333;
        }

        .skin-item.compact .skin-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }

        .skin-item.compact .skin-count {
            color: #1890ff;
            font-weight: bold;
            min-width: 40px;
            text-align: center;
        }

        .skin-btn {
            width: 30px;
            height: 30px;
            border: 1px solid #ddd;
            background: white;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .skin-btn:hover {
            background: #f0f0f0;
        }

        .skin-btn:active {
            background: #e0e0e0;
        }

        /* ËßíËâ≤ÂÖªÊàêÊåâÈíÆÊ†∑Âºè */
        .character-development-controls {
            display: flex;
            align-items: center;
            gap: 8px;
            flex-shrink: 0;
        }

        .character-dev-btn {
            width: 30px;
            height: 30px;
            border: 1px solid #ddd;
            background: white;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .character-dev-btn:hover {
            background: #f0f0f0;
        }

        .character-dev-btn:active {
            background: #e0e0e0;
        }

        .character-dev-count {
            color: #1890ff;
            font-weight: bold;
            min-width: 40px;
            text-align: center;
        }

        /* ÊöóÂüüÂºÄÂÖ≥ÁªÑÊ†∑Âºè */
        .dark-zone-switches {
            display: flex;
            gap: 15px;
        }

        /* Êï∞ÊçÆÈó¥ÈöôÊ†∑Âºè */
        .data-gap-subsection {
            margin: 15px 0;
            padding: 12px;
            background: white;
            border-radius: 6px;
            border: 1px solid #e1e5e9;
        }

        .data-gap-title {
            font-size: 14px;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .target-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 8px;
            margin-bottom: 10px;
        }

        .rating-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
        }

        .target-btn, .rating-btn {
            padding: 10px 8px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            font-weight: bold;
            text-align: center;
            transition: all 0.3s ease;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .target-btn:hover, .rating-btn:hover {
            border-color: #1890ff;
            background: #f0f8ff;
        }

        .target-btn.active, .rating-btn.active {
            border-color: #1890ff;
            background: #1890ff;
            color: white;
        }

        /* Êñ∞Â¢ûÊ®°ÂùóÊåâÈíÆÊ†∑Âºè */
        .main-story-buttons {
            margin-top: 10px;
        }

        .main-story-columns {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .main-story-column {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .main-story-btn {
            padding: 10px 8px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            font-weight: bold;
            text-align: center;
            transition: all 0.3s ease;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .main-story-btn:hover {
            border-color: #1890ff;
            background: #f0f8ff;
        }

        .main-story-btn.active {
            border-color: #1890ff;
            background: #1890ff;
            color: white;
        }

        /* ÁãÑÊñØÊöóÂΩ±ÔºàEXÔºâÊåâÈíÆÊ†∑Âºè */
        .ex-buttons {
            margin-top: 10px;
        }

        .ex-columns {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .ex-column {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .ex-btn {
            padding: 10px 8px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            font-weight: bold;
            text-align: center;
            transition: all 0.3s ease;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .ex-btn:hover {
            border-color: #1890ff;
            background: #f0f8ff;
        }

        .ex-btn.active {
            border-color: #1890ff;
            background: #1890ff;
            color: white;
        }

        .memory-storm-buttons,
        .pollution-nest-buttons,
        .cleanup-operation-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 8px;
            margin-top: 10px;
        }

        .memory-storm-btn,
        .pollution-nest-btn,
        .cleanup-operation-btn {
            padding: 10px 8px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            font-weight: bold;
            text-align: center;
            transition: all 0.3s ease;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .memory-storm-btn:hover,
        .pollution-nest-btn:hover,
        .cleanup-operation-btn:hover {
            border-color: #1890ff;
            background: #f0f8ff;
        }

        .memory-storm-btn.active,
        .pollution-nest-btn.active,
        .cleanup-operation-btn.active {
            border-color: #1890ff;
            background: #1890ff;
            color: white;
        }

        .palma-ruins-buttons {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 10px;
        }

        .palma-ruins-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
        }

        .palma-ruins-btn {
            padding: 10px 8px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            font-weight: bold;
            text-align: center;
            transition: all 0.3s ease;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .palma-ruins-btn:hover {
            border-color: #1890ff;
            background: #f0f8ff;
        }

        .palma-ruins-btn.active {
            border-color: #1890ff;
            background: #1890ff;
            color: white;
        }

        /* ËµÑÊ∫êÂõæÊ†áÊ†∑Âºè */
        .resource-icon {
            width: 24px;
            height: 24px;
            vertical-align: middle;
            margin: 0 2px;
        }

        .resource-icon.small {
            width: 16px;
            height: 16px;
        }

        /* ÂÖ∂‰ªñÂéüÊúâÊ†∑Âºè */
        .resource-input {
            margin: 10px 0;
            display: flex;
            align-items: center;
        }

        .resource-input label {
            width: 120px;
            font-weight: bold;
            color: #555;
        }

        .resource-input input {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
            width: 120px;
        }

        .custom-adjust {
            margin-top: 10px;
        }

        .custom-tip {
            font-size: 12px;
            color: #1890ff;
            margin-top: 5px;
            font-style: italic;
        }

        .accumulation-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 8px 0;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 5px;
        }

        .item-info {
            display: flex;
            align-items: center;
            flex: 1;
        }

        .item-title {
            font-weight: bold;
            color: #333;
            min-width: 120px;
        }

        .item-subtitle {
            color: #666;
            min-width: 80px;
            font-size: 14px;
        }

        .item-value {
            font-weight: bold;
            color: #1890ff;
            margin-left: 10px;
            display: flex;
            align-items: center;
            gap: 2px;
        }

        .switch-group {
            display: flex;
            align-items: center;
            margin: 10px 0;
            gap: 10px;
        }

        .switch-group.small {
            margin: 0 0 0 10px;
        }

        .switch {
            position: relative;
            width: 40px;
            height: 20px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 20px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 2px;
            bottom: 2px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: #1890ff;
        }

        input:checked + .slider:before {
            transform: translateX(20px);
        }

        .switch-label {
            font-size: 12px;
            margin-left: 5px;
            color: #666;
        }

        /* Âú®ËøôÈáåÊ∑ªÂä†ÂºÄÂÖ≥Ê†áÁ≠æÈ´ò‰∫ÆÊ†∑Âºè */
        .switch-label.active {
            color: #1890ff;
            font-weight: bold;
        }

        .switch-label.inactive {
            color: #999;
        }

        .time-options {
            display: flex;
            gap: 10px;
            justify-content: space-between;
        }

        .time-option {
            flex: 1;
            padding: 12px;
            min-width: 0; /* Èò≤Ê≠¢ÂÜÖÂÆπÊ∫¢Âá∫ */
        }

        .time-title {
            font-size: 14px;
            font-weight: bold;
        }

        .time-date {
            font-size: 12px;
            color: #666;
            margin: 3px 0;
        }

        .time-days {
            font-size: 16px;
            font-weight: bold;
            color: #1890ff;
            margin: 3px 0;
        }

        .time-weeks {
            font-size: 12px;
            color: #666;
        }

        .time-option {
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
        }

        .time-option.active {
            border-color: #1890ff;
            background: #f0f8ff;
        }

        .time-days {
            font-size: 18px;
            font-weight: bold;
            color: #1890ff;
            margin: 5px 0;
        }

        .time-weeks {
            font-size: 14px;
            color: #666;
            font-weight: normal;
        }

        .result {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
            font-size: 16px;
        }

        .result-item.simple {
            font-size: 18px;
        }

        .result-item.highlight {
            font-weight: bold;
            font-size: 20px;
            border-top: 1px solid #ddd;
            padding-top: 10px;
            margin-top: 15px;
        }

        .summary-section {
            margin: 15px 0;
            padding: 15px;
            background: white;
            border-radius: 8px;
            border-left: 4px solid #52c41a;
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            margin: 8px 0;
            font-size: 16px;
        }

        .summary-label {
            font-weight: bold;
            color: #333;
        }

        .summary-value {
            font-weight: bold;
            color: #52c41a;
        }

        .shop-section {
            margin-top: 15px;
            padding: 15px;
            background: #e8f4fd;
            border-radius: 8px;
        }

        .shop-title {
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .certification-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .certification-btn {
            width: 30px;
            height: 30px;
            border: 1px solid #ddd;
            background: white;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .certification-btn:hover {
            background: #f0f0f0;
        }

        .certification-count {
            font-weight: bold;
            color: #ffa500;
            min-width: 80px;
            text-align: center;
        }

        .training-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .training-btn {
            padding: 12px 8px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            text-align: center;
            transition: all 0.3s ease;
        }

        .training-btn:hover {
            border-color: #1890ff;
            background: #f0f8ff;
        }

        .training-btn.active {
            border-color: #1890ff;
            background: #1890ff;
            color: white;
        }

        .nightmare-score {
            margin-bottom: 20px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            border: 1px solid #e1e5e9;
        }

        .score-title {
            font-size: 14px;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .slider-container {
            margin-bottom: 15px;
        }

        .slider-labels {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 12px;
            color: #666;
        }

        /* Êó†Â∞ΩÊ¢¶È≠áÊªëÂùóÊ†∑ÂºèÔºàÂ§ßËåÉÂõ¥Ôºâ */
        .score-slider {
            width: 100%;
            height: 20px; /* Â¢ûÂä†È´òÂ∫¶ÁªôÊªëÂùóÊõ¥Â§öÁ©∫Èó¥ */
            border-radius: 3px;
            background: #f5f7fa; /* ‰ΩøÁî®È°µÈù¢ËÉåÊôØËâ≤ */
            outline: none;
            -webkit-appearance: none;
            margin: 10px 0;
        }

        .score-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #1890ff;
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .score-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #1890ff;
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .score-slider::-webkit-slider-track {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #ddd;
            margin: 7px 0; /* Ê∑ªÂä†ÂûÇÁõ¥Â±Ö‰∏≠ */
        }

        .score-slider::-moz-range-track {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #ddd;
            border: none;
        }

        /* ÁõëÂØüÂØÜ‰ª§ÊªëÂùóÊ†∑ÂºèÔºàÂ∞èËåÉÂõ¥Ôºâ */
        .inspection-slider {
            width: 100%;
            height: 20px; /* Â¢ûÂä†È´òÂ∫¶ÁªôÊªëÂùóÊõ¥Â§öÁ©∫Èó¥ */
            border-radius: 3px;
            background: #f5f7fa; /* ‰ΩøÁî®È°µÈù¢ËÉåÊôØËâ≤ */
            outline: none;
            -webkit-appearance: none;
            margin: 10px 0;
        }

        .inspection-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #1890ff;
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .inspection-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #1890ff;
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .inspection-slider::-webkit-slider-track {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #ddd;
            margin: 7px 0; /* Ê∑ªÂä†ÂûÇÁõ¥Â±Ö‰∏≠ */
        }

        .inspection-slider::-moz-range-track {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #ddd;
            border: none;
        }

        /* ÊªëÂùóÁ¶ÅÁî®Áä∂ÊÄÅÊ†∑Âºè */
        .inspection-slider:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .inspection-slider:disabled::-webkit-slider-thumb {
            background: #ccc;
            cursor: not-allowed;
        }
        
        .inspection-slider:disabled::-moz-range-thumb {
            background: #ccc;
            cursor: not-allowed;
        }

        .slider-value {
            text-align: center;
            font-size: 12px;
            color: #1890ff;
            margin-top: 5px;
            font-weight: bold;
        }

        .score-rewards {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .reward-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .reward-label {
            font-size: 13px;
            color: #333;
        }

        .reward-value {
            font-size: 13px;
            font-weight: bold;
            color: #1890ff;
        }

                /* Á¶ÅÁî®Áä∂ÊÄÅÊ†∑Âºè */
        .disabled-section {
            opacity: 0.6;
            pointer-events: none;
        }

        .disabled-section .skin-btn {
            background: #f0f0f0;
            color: #999;
            cursor: not-allowed;
        }

        .disabled-section .skin-btn:hover {
            background: #f0f0f0;
        }

        .disabled-section .skin-btn:active {
            background: #f0f0f0;
        }

        /* Êñ∞Â¢ûËßíËâ≤ÂÖªÊàêÊ®°ÂùóÊ†∑Âºè */
        .character-development-input {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 6px 0;
            padding: 6px;
            background: white;
            border-radius: 6px;
            border: 1px solid #e1e5e9;
            gap: 10px;
        }

        .character-development-label {
            font-weight: bold;
            color: #555;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
            flex: 1;
        }

        .character-development-controls {
            display: flex;
            align-items: center;
            gap: 8px;
            flex-shrink: 0;
        }

        .character-development-value {
            font-weight: bold;
            color: #1890ff;
            display: flex;
            align-items: center;
            gap: 2px;
        }

        .character-development-btn {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            text-align: center;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        .character-development-btn:hover {
            border-color: #1890ff;
            background: #f0f8ff;
        }

        .character-development-btn.active {
            border-color: #1890ff;
            background: #1890ff;
            color: white;
        }

        /* ÁßªÂä®Á´ØÈÄÇÈÖç */
        @media (max-width: 768px) {
            .gacha-calculator {
                padding: 10px;
            }
            
            .calculator-layout {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .sticky-panel {
                position: sticky;
                top: 10px;
                z-index: 100;
                background: white;
                border-radius: 15px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.1);
                margin-bottom: 15px;
            }

            .time-options {
                flex-direction: row;
                gap: 8px;
            }

            .time-option {
                padding: 10px;
            }

            .time-title {
                font-size: 13px;
            }

            .time-date {
                font-size: 11px;
            }

            .time-days {
                font-size: 14px;
            }

            .time-weeks {
                font-size: 11px;
            }
            
            .card {
                padding: 15px;
            }
            
            .resource-vertical {
                gap: 10px;
            }
            
            .resource-input-vertical {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }
            
            .resource-input-vertical label {
                min-width: auto;
            }
            
            .resource-input-vertical input {
                width: 100%;
                max-width: 120px;
            }
            
            .skin-reserve-row {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .dark-zone-switches {
                flex-direction: column;
                gap: 8px;
                width: 100%;
                margin-top: 8px;
            }
            
            .target-buttons {
                grid-template-columns: 1fr;
            }
            
            .rating-buttons {
                grid-template-columns: 1fr;
            }
            
            .target-btn, .rating-btn {
                font-size: 12px;
                padding: 8px 6px;
            }

            /* Êñ∞Â¢ûÊ®°ÂùóÁßªÂä®Á´ØÈÄÇÈÖç */
            .main-story-columns {
                grid-template-columns: 1fr;
            }

            .main-story-btn {
                font-size: 11px;
                padding: 8px 6px;
            }

            /* ÁãÑÊñØÊöóÂΩ±ÔºàEXÔºâÁßªÂä®Á´ØÈÄÇÈÖç */
            .ex-columns {
                grid-template-columns: 1fr;
            }

            .ex-btn {
                font-size: 11px;
                padding: 8px 6px;
            }

            .memory-storm-buttons,
            .pollution-nest-buttons,
            .cleanup-operation-buttons {
                grid-template-columns: 1fr;
            }

            .memory-storm-btn,
            .pollution-nest-btn,
            .cleanup-operation-btn {
                font-size: 12px;
                padding: 8px 6px;
            }

            .palma-ruins-row {
                grid-template-columns: 1fr;
            }

            .palma-ruins-btn {
                font-size: 12px;
                padding: 8px 6px;
            }
            
            .resource-input {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .resource-input label {
                width: auto;
                margin-bottom: 5px;
            }
            
            .time-options {
                grid-template-columns: 1fr;
            }
            
            .accumulation-item {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .switch-group.small {
                margin: 5px 0 0 0;
            }
            
            .item-info {
                width: 100%;
                margin-bottom: 8px;
            }
            
            h1 {
                font-size: 24px;
            }
            
            h2 {
                font-size: 16px;
            }
            
            .certification-controls {
                margin-top: 8px;
                width: 100%;
                justify-content: center;
            }
            
            .training-buttons {
                grid-template-columns: 1fr;
            }
            
            .summary-section {
                padding: 10px;
            }
            
            .summary-item {
                font-size: 14px;
            }
            
            .resource-icon {
                width: 22px;
                height: 22px;
            }
            
            .resource-icon.small {
                width: 18px;
                height: 18px;
            }

            /* ËßíËâ≤ÂÖªÊàêÊ®°ÂùóÁßªÂä®Á´ØÈÄÇÈÖç */
            .character-development-input {
                flex-direction: column;
                align-items: stretch;
                gap: 8px;
            }

            .character-development-label {
                display: flex;
                align-items: center;
                justify-content: space-between;
                gap: 8px;
                flex-direction: row;
            }

            .character-development-controls {
                align-self: center;
            }

            .module-toggle {
                margin-left: 0;
                margin-top: 5px;
            }
        }

        @media (max-width: 480px) {
            .gacha-calculator {
                padding: 5px;
            }
            
            .card {
                padding: 10px;
            }
            
            .time-title {
                font-size: 12px;
            }
            
            .time-date {
                font-size: 10px;
            }
            
            .time-days {
                font-size: 13px;
            }
            
            .time-weeks {
                font-size: 10px;
            }
            
            .time-option {
                padding: 8px;
            }

            .resource-input input {
                width: 100%;
            }
            
            .switch-group {
                flex-wrap: wrap;
            }
            
            .result-item.simple {
                font-size: 16px;
            }
            
            .result-item.highlight {
                font-size: 18px;
            }
            
            .sub-section {
                padding: 10px;
            }
            
            .summary-item {
                font-size: 13px;
            }
            
            .resource-input-vertical label {
                font-size: 13px;
            }
            
            .skin-item.compact {
                padding: 8px;
            }
            
            .target-btn, .rating-btn {
                font-size: 11px;
                padding: 6px 4px;
            }

            /* Êñ∞Â¢ûÊ®°ÂùóÂ∞èÂ±èÂπïÈÄÇÈÖç */
            .main-story-btn {
                font-size: 10px;
                padding: 6px 4px;
            }

            /* ÁãÑÊñØÊöóÂΩ±ÔºàEXÔºâÂ∞èÂ±èÂπïÈÄÇÈÖç */
            .ex-btn {
                font-size: 10px;
                padding: 6px 4px;
            }

            .memory-storm-btn,
            .pollution-nest-btn,
            .cleanup-operation-btn,
            .palma-ruins-btn {
                font-size: 11px;
                padding: 6px 4px;
            }
            
            .resource-icon {
                width: 20px;
                height: 20px;
            }
            
            .resource-icon.small {
                width: 16px;
                height: 16px;
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <div class="gacha-calculator">
            <h1><img :src="hlIcon" class="resource-icon" alt="Êµ∑Êãâ" style="width: 40px; height: 40px;"> Êµ∑ÊãâÁöÑÈí±ÂåÖ</h1>
            
            <div class="calculator-layout">
                <!-- Â∑¶‰æßÔºöÂç°Ê±†Êó∂Èó¥ÂíåÊîíÊäΩÈ¢ÑÊµã -->
                <div class="left-panel sticky-panel">
                    <!-- ÂêàÂπ∂ÁöÑÂç°Ê±†Êó∂Èó¥ÂíåÊîíÊäΩÈ¢ÑÊµãÊ®°Âùó -->
                    <div class="time-section card">
                        <h2 @click="toggleSection('pullSummary')" class="section-header">
                            üìä ÂÖ±ËÆ° {{ futurePulls }} ÊäΩ üí∞Ê∞™Èáë{{ totalRechargeCost }}Ôø•
                            <span class="collapse-icon">{{ sections.pullSummary ? '‚àí' : '+' }}</span>
                        </h2>
                        
                        <!-- ËµÑÊ∫ê‰ø°ÊÅØ - ÂßãÁªàÊòæÁ§∫ -->
                        <div class="resource-summary" style="margin-top: 10px;">
                            <div class="summary-section" style="display: flex; justify-content: space-around; align-items: center; gap: 15px;">
                                <div class="summary-item" style="display: flex; align-items: center; gap: 8px; margin: 0;">
                                    <img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">
                                    <div style="display: flex; flex-direction: column; align-items: flex-start; gap: 2px;">
                                        <span class="summary-value">{{ totalCrystalSummary }}</span>
                                        <div style="font-size: 12px; color: #666;">({{ Math.floor(totalCrystalSummary / 180) }}ÊäΩ)</div>
                                    </div>
                                </div>
                                <div class="summary-item" style="display: flex; align-items: center; gap: 8px; margin: 0;">
                                    <img :src="premiumCrystalIcon" class="resource-icon" alt="ÁíÄÁí®Êô∂Ê∫ê">
                                    <div style="display: flex; flex-direction: column; align-items: flex-start; gap: 2px;">
                                        <span class="summary-value">{{ totalPremiumCrystalSummary }}</span>
                                        <div style="font-size: 12px; color: #666;">({{ Math.floor(totalPremiumCrystalSummary / 180) }}ÊäΩ)</div>
                                    </div>
                                </div>
                                <div class="summary-item" style="display: flex; align-items: center; gap: 8px; margin: 0;">
                                    <img :src="ticketIcon" class="resource-icon" alt="ÊêúÁ¥¢‰ª§">
                                    <div style="display: flex; flex-direction: column; align-items: flex-start; gap: 2px;">
                                        <span class="summary-value">{{ totalTicketsSummary }}</span>
                                        <div style="font-size: 12px; color: #666;">({{ totalTicketsSummary }}ÊäΩ)</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- ËØ¶ÁªÜÂÜÖÂÆπ - ÂèØÊäòÂè† -->
                        <div v-if="sections.pullSummary" class="section-content">
                            <!-- Âç°Ê±†Êó∂Èó¥ÂÜÖÂÆπ -->
                            <div class="switch-group">
                                <span class="switch-label" :class="{ active: !calculateToPoolEnd, inactive: calculateToPoolEnd }">ËÆ°ÁÆóÂà∞Âç°Ê±†ÂºÄÊîæÂΩìÂ§©</span>
                                <label class="switch">
                                    <input type="checkbox" v-model="calculateToPoolEnd">
                                    <span class="slider"></span>
                                </label>
                                <span class="switch-label" :class="{ active: calculateToPoolEnd, inactive: !calculateToPoolEnd }">ËÆ°ÁÆóÂà∞Âç°Ê±†ÁªìÊùüÂΩìÂ§©</span>
                            </div>
                            
                            <div class="time-options">
                                <div class="time-option" 
                                    :class="{ active: selectedTime === 'nextVersion' }"
                                    @click="selectedTime = 'nextVersion'">
                                    <div class="time-title">‰∏ãÁâàÊú¨</div>
                                    <div class="time-date">2025Âπ¥11Êúà20Êó•</div>
                                    <div class="time-days">Ââ©‰Ωô {{ calculateDisplayDays('nextVersion') }} Â§©</div>
                                    <div class="time-weeks">ÊåÅÁª≠ {{ versionWeeks }} Âë®</div>
                                </div>

                                <div class="time-option" 
                                    :class="{ active: selectedTime === 'newYear' }"
                                    @click="selectedTime = 'newYear'">
                                    <div class="time-title">Êñ∞Âπ¥ÁâàÊú¨</div>
                                    <div class="time-date">2026Âπ¥2Êúà17Êó•</div>
                                    <div class="time-days">Ââ©‰Ωô {{ calculateDisplayDays('newYear') }} Â§©</div>
                                    <div class="time-weeks">ÊåÅÁª≠ {{ versionWeeks }} Âë®</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Âè≥‰æßÔºöÂΩìÂâçËµÑÊ∫êÂíåÊó•Â∏∏ÁßØÁ¥Ø -->
                <div class="right-panel">
                    <!-- ÂΩìÂâçËµÑÊ∫ê -->
                    <div class="input-section card">
                        <h2 @click="toggleSection('resources')" class="section-header">
                            üíé ÂΩìÂâçËµÑÊ∫ê
                            <span class="collapse-icon">{{ sections.resources ? '‚àí' : '+' }}</span>
                        </h2>
                        <div v-if="sections.resources" class="section-content">
                            <!-- ÂΩìÂâçÂ∫ìÂ≠ò - ‰øÆÊîπ‰∏∫ÂûÇÁõ¥Â∏ÉÂ±Ä -->
                            <div class="sub-section">
                                <h3 class="sub-title">ÂΩìÂâçÂ∫ìÂ≠ò</h3>
                                <!-- ‰ΩøÁî®ÁíÄÁí®Êô∂Ê∫êÂºÄÂÖ≥ÁßªÂÖ•ÂΩìÂâçÂ∫ìÂ≠ò -->
                                <div class="switch-group">
                                    <label class="switch">
                                        <input type="checkbox" v-model="usePremiumCrystal">
                                        <span class="slider"></span>
                                    </label>
                                    <span class="switch-label">‰ΩøÁî®ÁíÄÁí®Êô∂Ê∫êÊäΩÂç°</span>
                                </div>
                                <div class="resource-vertical">
                                    <div class="resource-input-vertical">
                                        <label>
                                            <img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂"> ÂºÇÊñπÊô∂Ôºö
                                        </label>
                                        <input type="number" v-model.number="resources.crystal" placeholder="0" min="0" step="1" @input="validateInput('crystal')">
                                    </div>
                                    <div class="resource-input-vertical">
                                        <label>
                                            <img :src="premiumCrystalIcon" class="resource-icon" alt="ÁíÄÁí®Êô∂Ê∫ê"> ÁíÄÁí®Êô∂Ê∫êÔºö
                                        </label>
                                        <input type="number" v-model.number="resources.premiumCrystal" placeholder="0" min="0" step="1" @input="validateInput('premiumCrystal')">
                                    </div>
                                    <div class="resource-input-vertical">
                                        <label>
                                            <img :src="ticketIcon" class="resource-icon" alt="ÊêúÁ¥¢‰ª§"> ÊêúÁ¥¢‰ª§Ôºö
                                        </label>
                                        <input type="number" v-model.number="resources.tickets" placeholder="0" min="0" step="1" @input="validateInput('tickets')">
                                    </div>
                                </div>
                            </div>

                            <!-- ÁöÆËÇ§È¢ÑÁïôÁ∫¢Êô∂ - ‰øÆÊîπÊåâÈîÆÂ∏ÉÂ±Ä -->
                            <div class="sub-section" :class="{ 'disabled-section': !usePremiumCrystal }">
                                <h3 class="sub-title">ÁöÆËÇ§È¢ÑÁïôÁ∫¢Êô∂</h3>
                                <div class="skin-reserve-row">
                                    <div class="skin-item compact">
                                        <div class="skin-info">
                                            <span class="skin-price">‚úß‚úß880<img :src="redCrystalIcon" class="resource-icon small" alt="Á∫¢Êô∂"></span>
                                        </div>
                                        <div class="skin-controls">
                                            <button class="skin-btn" @click="adjustSkinCount(880, -1)" :disabled="!usePremiumCrystal">‚àí</button>
                                            <span class="skin-count">{{ skinReserve.skin880 }} ‰∏™</span>
                                            <button class="skin-btn" @click="adjustSkinCount(880, 1)" :disabled="!usePremiumCrystal">+</button>
                                        </div>
                                    </div>
                                    <div class="skin-item compact">
                                        <div class="skin-info">
                                            <span class="skin-price">‚úß‚úß‚úß1280<img :src="redCrystalIcon" class="resource-icon small" alt="Á∫¢Êô∂"></span>
                                        </div>
                                        <div class="skin-controls">
                                            <button class="skin-btn" @click="adjustSkinCount(1280, -1)" :disabled="!usePremiumCrystal">‚àí</button>
                                            <span class="skin-count">{{ skinReserve.skin1280 }} ‰∏™</span>
                                            <button class="skin-btn" @click="adjustSkinCount(1280, 1)" :disabled="!usePremiumCrystal">+</button>
                                        </div>
                                    </div>
                                    <div class="skin-item compact">
                                        <div class="skin-info">
                                            <span class="skin-price">‚úß‚úß‚úß‚úß2580<img :src="redCrystalIcon" class="resource-icon small" alt="Á∫¢Êô∂"></span>
                                        </div>
                                        <div class="skin-controls">
                                            <button class="skin-btn" @click="adjustSkinCount(2580, -1)" :disabled="!usePremiumCrystal">‚àí</button>
                                            <span class="skin-count">{{ skinReserve.skin2580 }} ‰∏™</span>
                                            <button class="skin-btn" @click="adjustSkinCount(2580, 1)" :disabled="!usePremiumCrystal">+</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Ëá™ÂÆö‰πâ‰øÆÊ≠£ -->
                            <div class="sub-section">
                                <h3 class="sub-title">Ëá™ÂÆö‰πâ‰øÆÊ≠£</h3>
                                <div class="custom-adjust">
                                    <div class="resource-input">
                                        <label style="min-width: 140px;">
                                            <img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">ÂºÇÊñπÊô∂‰øÆÊ≠£Ôºö
                                        </label>
                                        <input type="number" v-model.number="customAdjustment" placeholder="0">
                                    </div>
                                    <div class="custom-tip">
                                        ‰æãÂ¶ÇÁªôÂ§çÂàªÊ±†È¢ÑÁïô„ÄÅÂÖ∂ÂÆÉÂºÇÊñπÊô∂Êù•Ê∫êÊàñÂÖ≥Âç°Êú™ÊâìÊª°Á≠âÔºåÂèØÂ°´Ë¥üÊï∞
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Êó•Â∏∏ÁßØÁ¥Ø -->
                    <div class="daily-section card">
                        <h2 @click="toggleSection('daily')" class="section-header">
                            üìà Êó•Â∏∏ÁßØÁ¥ØÔºàÊõ¥ÊõøÔºâ
                            <span class="collapse-icon">{{ sections.daily ? '‚àí' : '+' }}</span>
                        </h2>
                        <div v-if="sections.daily" class="section-content">
                            <!-- Ê¥ªË∑ÉÂ•ñÂä±Ê®°Âùó -->
                            <div class="sub-section">
                                <h3 class="sub-title">Ê¥ªË∑ÉÂ•ñÂä±</h3>
                                <!-- Êó•Â∏∏Ê¥ªË∑É -->
                                <div class="accumulation-item">
                                    <div class="item-info">
                                        <span class="item-title">Êó•Â∏∏{{ selectedDays }}Â§©Ôºö</span>
                                        <span class="item-value"><img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂"> {{ dailyActiveTotal }} </span>
                                    </div>
                                </div>

                                <!-- Âë®Â∏∏Ê¥ªË∑É -->
                                <div class="accumulation-item">
                                    <div class="item-info">
                                        <span class="item-title">Âë®Â∏∏{{ remainingWeeklyCount }}Âë®Ôºö</span>
                                        <span class="item-value"><img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂"> {{ remainingWeeklyTotal }} </span>
                                    </div>
                                    <div class="switch-group small">
                                        <label class="switch">
                                            <input type="checkbox" v-model="weeklyCompleted">
                                            <span class="slider"></span>
                                        </label>
                                        <span class="switch-label">Êú¨Âë®Â∑≤ÂÆåÊàê</span>
                                    </div>
                                </div>

                                <!-- ÊØèÂë®ÂàÜ‰∫´ - ‰ΩçÁΩÆË∞ÉÊï¥Âà∞ÊÉÖÁª™Ê£ÄÊµã‰∏äÊñπ -->
                                <div class="accumulation-item">
                                    <div class="item-info">
                                        <span class="item-title">ÂàÜ‰∫´{{ remainingShareWeeks }}Âë®Ôºö</span>
                                        <span class="item-value"> <img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂"> {{ remainingShareTotal }} </span>
                                    </div>
                                    <div class="switch-group small">
                                        <label class="switch">
                                            <input type="checkbox" v-model="dailyShareCompleted">
                                            <span class="slider"></span>
                                        </label>
                                        <span class="switch-label">Êú¨Âë®Â∑≤ÂàÜ‰∫´</span>
                                    </div>
                                </div>

                                <!-- ÊÉÖÁª™Ê£ÄÊµã - ‰ΩçÁΩÆË∞ÉÊï¥Âà∞ÊØèÂë®ÂàÜ‰∫´‰∏ãÊñπ -->
                                <div class="accumulation-item">
                                    <div class="item-info">
                                        <span class="item-title">ÊÉÖÁª™Ê£ÄÊµã{{ remainingMonths }}ÊúàÔºö</span>
                                        <span class="item-value">
                                            <img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">{{ totalEmotionDetection }} <img :src="ticketIcon" class="resource-icon" alt="ÊêúÁ¥¢‰ª§">{{ totalEmotionDetectionTickets }}
                                        </span>
                                    </div>
                                    <div class="switch-group small">
                                        <label class="switch">
                                            <input type="checkbox" v-model="emotionDetectionCompleted">
                                            <span class="slider"></span>
                                        </label>
                                        <span class="switch-label">Êú¨ÊúàÂ∑≤ÂÆåÊàê</span>
                                    </div>
                                </div>

                                <!-- Á≠æÂà∞Â•ñÂä± - Êñ∞Â¢ûÊ®°Âùó -->
                                <div class="accumulation-item">
                                    <div class="item-info">
                                        <span class="item-title">Á≠æÂà∞Â•ñÂä±{{ remainingMonths }}ÊúàÔºö</span>
                                        <span class="item-value">
                                            <img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">{{ totalSignInReward }} <img :src="ticketIcon" class="resource-icon" alt="ÊêúÁ¥¢‰ª§">{{ totalSignInRewardTickets }}
                                        </span>
                                    </div>
                                    <div class="switch-group small">
                                        <label class="switch">
                                            <input type="checkbox" v-model="signInRewardCompleted">
                                            <span class="slider"></span>
                                        </label>
                                        <span class="switch-label">Êú¨ÊúàÂ∑≤ÂÆåÊàê</span>
                                    </div>
                                </div>

                                <!-- ÁõëÂØüÂØÜ‰ª§Ê®°Âùó - Êï¥ÂêàÂà∞ËÉåÊôØÊ°Ü‰∏≠ -->
                                <div class="nightmare-score" style="margin-top: 20px;">
                                    
                                <button 
                                    class="training-btn" 
                                    style="width: 100%; margin-bottom: 15px; background: #f0f0f0; cursor: default;"
                                    disabled>
                                    ÁªèÂéÜ{{ calculateInspectionPeriods }}ÊúüÁõëÂØüÂØÜ‰ª§
                                    <img :src="ticketIcon" class="resource-icon" alt="ÊêúÁ¥¢‰ª§"> {{ dailyInspectionOrderTickets }}
                                </button>
                                    
                                    <div class="slider-container">
                                        <div class="slider-labels">
                                            <span>0Á∫ß</span>
                                            <span>55Á∫ß</span>
                                        </div>
                                        <input 
                                            type="range" 
                                            v-model.number="dailyInspectionOrderLevel" 
                                            min="0" 
                                            max="55"
                                            step="5"
                                            class="inspection-slider"
                                        >
                                        <datalist id="inspection-levels">
                                            <option value="0">0</option>
                                            <option value="5">5</option>
                                            <option value="15">15</option>
                                            <option value="25">25</option>
                                            <option value="30">30</option>
                                            <option value="35">35</option>
                                            <option value="45">45</option>
                                            <option value="50">50</option>
                                            <option value="55">55</option>
                                        </datalist>
                                        <div class="slider-value">
                                            Êú¨ÊúüÁõëÂØüÂØÜ‰ª§Á≠âÁ∫ß: {{ dailyInspectionOrderLevel }}
                                        </div>
                                    </div>
                                </div>

                            </div>

                            <!-- Á†¥Á¢éÈò≤Á∫øÊ®°Âùó -->
                            <div class="sub-section">
                                <h3 class="sub-title">Á†¥Á¢éÈò≤Á∫ø</h3>
                                <!-- ÊöóÂüü -->
                                <div class="dark-zone-section">
                                    <div class="accumulation-item">
                                        <div class="item-info">
                                            <span class="item-title">ÊöóÂüü{{ remainingDarkZoneWeeks }}Âë®Ôºö</span>
                                            <span class="item-value"> <img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂"> {{ remainingDarkZoneTotal }}</span>
                                        </div>
                                        <div class="dark-zone-switches">
                                            <div class="switch-group small">
                                                <label class="switch">
                                                    <input type="checkbox" v-model="darkZoneSweepOnly">
                                                    <span class="slider"></span>
                                                </label>
                                                <span class="switch-label">‰ªÖÊâ´Ëç°</span>
                                            </div>
                                            <div class="switch-group small">
                                                <label class="switch">
                                                    <input type="checkbox" v-model="darkZoneCompleted">
                                                    <span class="slider"></span>
                                                </label>
                                                <span class="switch-label">Êú¨Âë®Â∑≤ÂÆåÊàê</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="accumulation-item">
                                        <div class="item-info">
                                            <span class="item-title">È¶ñÈÄöÂ•ñÂä±Ôºö</span>
                                            <span class="item-value"> <img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂"> {{ totalDarkZoneFirst }}</span>
                                        </div>
                                        <div class="switch-group small">
                                            <label class="switch">
                                                <input type="checkbox" v-model="darkZoneFirstCompleted">
                                                <span class="slider"></span>
                                            </label>
                                            <span class="switch-label">Êú¨ÊúüÂ∑≤ÂÆåÊàê</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Êï∞ÊçÆÈó¥ÈöôÊ®°Âùó -->
                            <div class="sub-section">
                                <h3 class="sub-title">Êï∞ÊçÆÈó¥Èöô-‰∏äÂçäËµõÂ≠£</h3>
                                
                                <!-- ÁõÆÊ†áÂ•ñÂä±Â≠êÊ®°Âùó -->
                                <div class="data-gap-subsection">
                                    <h4 class="data-gap-title">ÁõÆÊ†áÂ•ñÂä±-L1</h4>
                                    <div class="target-buttons">
                                        <button 
                                            class="target-btn" 
                                            :class="{ active: dataGap.targets.missionComplete }"
                                            @click="toggleDataGap('targets', 'missionComplete')">
                                            ÂÆåÊàêÂÖ≥Âç°<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">300
                                        </button>
                                        <button 
                                            class="target-btn" 
                                            :class="{ active: dataGap.targets.missionCount }"
                                            @click="toggleDataGap('targets', 'missionCount')">
                                            ÂÆåÊàêÂÖ≥Âç°Êï∞Èáè<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">120
                                        </button>
                                        <button 
                                            class="target-btn" 
                                            :class="{ active: dataGap.targets.targetComplete }"
                                            @click="toggleDataGap('targets', 'targetComplete')">
                                            ÁõÆÊ†áÂÆåÊàêÊï∞Èáè<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">140
                                        </button>
                                    </div>
                                </div>

                                <!-- ËØÑÂàÜÂ•ñÂä±Â≠êÊ®°Âùó -->
                                <div class="data-gap-subsection">
                                    <h4 class="data-gap-title">ËØÑÂàÜÂ•ñÂä±-L2</h4>
                                    <div class="rating-buttons">
                                        <button 
                                            class="rating-btn" 
                                            :class="{ active: dataGap.ratings.healing }"
                                            @click="toggleDataGap('ratings', 'healing')">
                                            Âçï‰ΩçÊ≤ªÁñóÈáè<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">100
                                        </button>
                                        <button 
                                            class="rating-btn" 
                                            :class="{ active: dataGap.ratings.shield }"
                                            @click="toggleDataGap('ratings', 'shield')">
                                            Âçï‰ΩçÊä§ÁõæÈáè<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">100
                                        </button>
                                        <button 
                                            class="rating-btn" 
                                            :class="{ active: dataGap.ratings.controlTime }"
                                            @click="toggleDataGap('ratings', 'controlTime')">
                                            ÊéßÂà∂Êó∂ÈïøÁßØÂàÜ<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">100
                                        </button>
                                        <button 
                                            class="rating-btn" 
                                            :class="{ active: dataGap.ratings.controlCount }"
                                            @click="toggleDataGap('ratings', 'controlCount')">
                                            ÊéßÂà∂Ê¨°Êï∞<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">100
                                        </button>
                                        <button 
                                            class="rating-btn" 
                                            :class="{ active: dataGap.ratings.totalDamage }"
                                            @click="toggleDataGap('ratings', 'totalDamage')">
                                            ÊÄª‰º§ÂÆ≥<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">100
                                        </button>
                                        <button 
                                            class="rating-btn" 
                                            :class="{ active: dataGap.ratings.coreDamage }"
                                            @click="toggleDataGap('ratings', 'coreDamage')">
                                            Á†¥Ê†∏ÊúüÈó¥‰º§ÂÆ≥<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">100
                                        </button>
                                        <button 
                                            class="rating-btn" 
                                            :class="{ active: dataGap.ratings.comprehensive }"
                                            @click="toggleDataGap('ratings', 'comprehensive')">
                                            ÁªºÂêàËØÑÂàÜ<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">100
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- ÁãÇÂéÑÁâπËÆ≠Ê®°Âùó -->
                            <div class="sub-section">
                                <h3 class="sub-title">ÁãÇÂéÑÁâπËÆ≠</h3>
                                <div class="training-buttons">
                                    <button 
                                        class="training-btn" 
                                        :class="{ active: trainingModes.steady }"
                                        @click="toggleTrainingMode('steady')">
                                        Âπ≥Á®≥<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">100<img :src="ticketIcon" class="resource-icon" alt="ÊêúÁ¥¢‰ª§">1
                                    </button>
                                    <button 
                                        class="training-btn" 
                                        :class="{ active: trainingModes.fluctuating }"
                                        @click="toggleTrainingMode('fluctuating')">
                                        Ê≥¢Âä®<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">200<img :src="ticketIcon" class="resource-icon" alt="ÊêúÁ¥¢‰ª§">2
                                    </button>
                                    <button 
                                        class="training-btn" 
                                        :class="{ active: trainingModes.outOfControl }"
                                        @click="toggleTrainingMode('outOfControl')">
                                        Â§±Êéß<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">200
                                    </button>
                                    <button 
                                        class="training-btn" 
                                        :class="{ active: trainingModes.crazy }"
                                        @click="toggleTrainingMode('crazy')">
                                        ÁñØÁãÇ<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">60
                                    </button>
                                </div>
                            </div>

                            <!-- Á•∏Êµ∑‰πãÂéÑÊ®°Âùó - ÁßªÂÖ•Êó•Â∏∏ÁßØÁ¥Ø -->
                            <div class="sub-section">
                                <h3 class="sub-title">Êó†Â∞ΩÊ¢¶È≠á</h3>
                                <div class="accumulation-item">
                                    <div class="item-info">
                                        <span class="item-title">Á•∏Êµ∑‰πãÂéÑÔºö</span>
                                        <span class="item-value"> <img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂"> {{ nightmareSeaReward }}</span>
                                    </div>
                                    <div class="switch-group small">
                                        <label class="switch">
                                            <input type="checkbox" v-model="nightmareSeaCompleted">
                                            <span class="slider"></span>
                                        </label>
                                        <span class="switch-label">Êú¨ÊúüÂ∑≤ÂÆåÊàê</span>
                                    </div>
                                </div>
                            </div>

                            <!-- ÂïÜÂ∫óÂÖëÊç¢ -->
                            <div class="shop-section">
                                <div class="shop-title">ÂïÜÂ∫óÂÖëÊç¢</div>
                                
                                <div class="accumulation-item">
                                    <div class="item-info">
                                        <span class="item-title">ËøΩË∏™ËÆ§ËØÅ-Â∏∏ËßÑÔºö</span>
                                        <span class="item-value"> <img :src="ticketIcon" class="resource-icon" alt="ÊêúÁ¥¢‰ª§"> {{ remainingTrackingExchange }}</span>
                                    </div>
                                    <div class="switch-group small">
                                        <label class="switch">
                                            <input type="checkbox" v-model="trackingExchanged">
                                            <span class="slider"></span>
                                        </label>
                                        <span class="switch-label">Êú¨ÊúàÂ∑≤ÂÖëÊç¢</span>
                                    </div>
                                </div>

                                <div class="accumulation-item">
                                    <div class="item-info">
                                        <span class="item-title">ËøΩË∏™ËÆ§ËØÅ-Êú∫ÂØÜÔºö</span>
                                        <span class="item-value"> <img :src="ticketIcon" class="resource-icon" alt="ÊêúÁ¥¢‰ª§"> {{ trackingCertificationTickets }}</span>
                                    </div>
                                    <div class="certification-controls">
                                        <div style="display: flex; align-items: center; gap: 8px;">
                                            <input 
                                                type="number" 
                                                v-model.number="trackingCertificationCount" 
                                                placeholder="0" 
                                                min="0" 
                                                step="1" 
                                                @input="validateCertificationInput"
                                                style="width: 80px; padding: 8px; border: 1px solid #ddd; border-radius: 5px; text-align: center;"
                                            >
                                            <img :src="yellowTicketIcon" class="resource-icon" alt="ÈªÑÁ•®">
                                        </div>
                                    </div>
                                    <div class="switch-group small">
                                        <label class="switch">
                                            <input type="checkbox" v-model="useTrackingCertification">
                                            <span class="slider"></span>
                                        </label>
                                        <span class="switch-label">‰ΩøÁî®ÈªÑÁ•®ÂÖëÊç¢</span>
                                    </div>
                                </div>

                                <div class="accumulation-item">
                                    <div class="item-info">
                                        <span class="item-title">ÂèãÊÉÖÂÖëÊç¢Ôºö</span>
                                        <span class="item-value"> <img :src="ticketIcon" class="resource-icon" alt="ÊêúÁ¥¢‰ª§"> {{ remainingFriendshipExchange }}</span>
                                    </div>
                                    <div class="switch-group small">
                                        <label class="switch">
                                            <input type="checkbox" v-model="friendshipExchanged">
                                            <span class="slider"></span>
                                        </label>
                                        <span class="switch-label">Êú¨ÊúàÂ∑≤ÂÖëÊç¢</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ÊΩúÂú®ËµÑÊ∫êÊ®°Âùó -->
                    <div class="potential-section card">
                        <h2 @click="toggleSection('potential')" class="section-header">
                            üîÆ ÊΩúÂú®ËµÑÊ∫êÔºàÂ∏∏È©ªÔºâ
                            <span class="collapse-icon">{{ sections.potential ? '‚àí' : '+' }}</span>
                        </h2>
                        <div v-if="sections.potential" class="section-content">
                            <!-- Êó†Â∞ΩÊ¢¶È≠áÂ≠êÊ®°Âùó -->
                            <div class="sub-section">
                                <h3 class="sub-title">Êó†Â∞ΩÊ¢¶È≠á</h3>
                                
                                <!-- ÁßØÂàÜÂ•ñÂä± -->
                                <div class="nightmare-score">
                                    <h4 class="score-title">
                                        ÁßØÂàÜÂ•ñÂä± 
                                        <span style="font-size: 14px; font-weight: normal; margin-left: 10px;">
                                            <img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂"> {{ nightmareCrystalReward }} 
                                            <img :src="ticketIcon" class="resource-icon" alt="ÊêúÁ¥¢‰ª§"> {{ nightmareTicketReward }}
                                        </span>
                                    </h4>
                                    <div class="slider-container">
                                        <div class="slider-labels">
                                            <span>0</span>
                                            <span>60000</span>
                                        </div>
                                        <input 
                                            type="range" 
                                            v-model.number="nightmareScore" 
                                            min="0" 
                                            max="60000" 
                                            step="1000"
                                            class="score-slider"
                                        >
                                        <div class="slider-value">
                                            ÂΩìÂâçÁßØÂàÜ: {{ nightmareScore }}
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- ËßíËâ≤ÂÖªÊàêÊ®°Âùó -->
                            <div class="sub-section">
                                <h3 class="sub-title">ËßíËâ≤ÂÖªÊàê</h3>
                                
                                <div class="character-development-input">
                                    <span class="character-development-label">
                                        Êú™3Èò∂ËßíËâ≤Êï∞ÈáèÔºö
                                        <span class="character-development-value">
                                            <img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂"> {{ characterDevelopment.tier3 * 180 }}
                                        </span>
                                    </span>
                                    <div class="character-development-controls">
                                        <button class="character-dev-btn" @click="adjustCharacterDev('tier3', -1)">‚àí</button>
                                        <span class="character-dev-count">{{ characterDevelopment.tier3 }}</span>
                                        <button class="character-dev-btn" @click="adjustCharacterDev('tier3', 1)">+</button>
                                    </div>
                                </div>
                                
                                <div class="character-development-input">
                                    <span class="character-development-label">
                                        Êú™Êª°Ê∑∑ÂìçÁãÇÁ∫ßËßíËâ≤Êï∞ÈáèÔºö
                                        <span class="character-development-value">
                                            <img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂"> {{ characterDevelopment.maxReverbS * 210 }}
                                        </span>
                                    </span>
                                    <div class="character-development-controls">
                                        <button class="character-dev-btn" @click="adjustCharacterDev('maxReverbS', -1)">‚àí</button>
                                        <span class="character-dev-count">{{ characterDevelopment.maxReverbS }}</span>
                                        <button class="character-dev-btn" @click="adjustCharacterDev('maxReverbS', 1)">+</button>
                                    </div>
                                </div>
                                
                                <div class="character-development-input">
                                    <span class="character-development-label">
                                        Êú™Êª°Ê∑∑ÂìçÂç±Á∫ßËßíËâ≤Êï∞ÈáèÔºö
                                        <span class="character-development-value">
                                            <img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂"> {{ characterDevelopment.maxReverbA * 60 }}
                                        </span>
                                    </span>
                                    <div class="character-development-controls">
                                        <button class="character-dev-btn" @click="adjustCharacterDev('maxReverbA', -1)">‚àí</button>
                                        <span class="character-dev-count">{{ characterDevelopment.maxReverbA }}</span>
                                        <button class="character-dev-btn" @click="adjustCharacterDev('maxReverbA', 1)">+</button>
                                    </div>
                                </div>
                                
                                <div class="character-development-input">
                                    <span class="character-development-label">
                                        Êú™Êª°Ê∑∑ÂìçÊôÆÁ∫ßËßíËâ≤Êï∞ÈáèÔºö
                                        <span class="character-development-value">
                                            <img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂"> {{ characterDevelopment.maxReverbB * 20 }}
                                        </span>
                                    </span>
                                    <div class="character-development-controls">
                                        <button class="character-dev-btn" @click="adjustCharacterDev('maxReverbB', -1)">‚àí</button>
                                        <span class="character-dev-count">{{ characterDevelopment.maxReverbB }}</span>
                                        <button class="character-dev-btn" @click="adjustCharacterDev('maxReverbB', 1)">+</button>
                                    </div>
                                </div>
                                
                                <div class="character-development-input">
                                    <span class="character-development-label">
                                        Êú™ÂÆ°Êü•ÁãÇÁ∫ßËßíËâ≤Êï∞ÈáèÔºö
                                        <span class="character-development-value">
                                            <img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂"> {{ characterDevelopment.reviewS * 200 }}
                                        </span>
                                    </span>
                                    <div class="character-development-controls">
                                        <button class="character-dev-btn" @click="adjustCharacterDev('reviewS', -1)">‚àí</button>
                                        <span class="character-dev-count">{{ characterDevelopment.reviewS }}</span>
                                        <button class="character-dev-btn" @click="adjustCharacterDev('reviewS', 1)">+</button>
                                    </div>
                                </div>
                                
                                <div class="character-development-input">
                                    <span class="character-development-label">
                                        Êú™ÂÆ°Êü•Âç±Á∫ßËßíËâ≤Êï∞ÈáèÔºö
                                        <span class="character-development-value">
                                            <img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂"> {{ characterDevelopment.reviewA * 150 }}
                                        </span>
                                    </span>
                                    <div class="character-development-controls">
                                        <button class="character-dev-btn" @click="adjustCharacterDev('reviewA', -1)">‚àí</button>
                                        <span class="character-dev-count">{{ characterDevelopment.reviewA }}</span>
                                        <button class="character-dev-btn" @click="adjustCharacterDev('reviewA', 1)">+</button>
                                    </div>
                                </div>
                                
                                <button 
                                    class="character-development-btn" 
                                    :class="{ active: characterDevelopment.haylaReviewed }"
                                    @click="toggleHaylaReview">
                                    {{ characterDevelopment.haylaReviewed ? 'Â∑≤ÂÆ°Êü•Êµ∑ÊãâÔºÅ' : 'Êú™ÂÆ°Êü•Êµ∑ÊãâÔºÅ' }}
                                </button>
                            </div>

                            <!-- ÁãÑÊñØÂüéÔºà‰∏ªÁ∫øÔºâ -->
                            <div class="sub-section">
                                <h3 class="sub-title">ÁãÑÊñØÂüéÔºà‰∏ªÁ∫øÔºâ</h3>
                                <div class="main-story-buttons">
                                    <div class="main-story-columns">
                                        <div class="main-story-column">
                                            <button 
                                                class="main-story-btn" 
                                                :class="{ active: mainStory.chaosBeyondA }"
                                                @click="toggleMainStory('chaosBeyondA')">
                                                01Ê∑∑Ê≤åÂΩºÂ≤∏A<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">995<img :src="ticketIcon" class="resource-icon" alt="ÊêúÁ¥¢‰ª§">1
                                            </button>
                                            <button 
                                                class="main-story-btn" 
                                                :class="{ active: mainStory.chaosBeyondB }"
                                                @click="toggleMainStory('chaosBeyondB')">
                                                02Ê∑∑Ê≤åÂΩºÂ≤∏B<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">1230<img :src="ticketIcon" class="resource-icon" alt="ÊêúÁ¥¢‰ª§">1
                                            </button>
                                            <button 
                                                class="main-story-btn" 
                                                :class="{ active: mainStory.unownedCavernA }"
                                                @click="toggleMainStory('unownedCavernA')">
                                                03Êó†‰∏ªÂú∞Á™üA<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">1175<img :src="ticketIcon" class="resource-icon" alt="ÊêúÁ¥¢‰ª§">1
                                            </button>
                                            <button 
                                                class="main-story-btn" 
                                                :class="{ active: mainStory.unownedCavernB }"
                                                @click="toggleMainStory('unownedCavernB')">
                                                04Êó†‰∏ªÂú∞Á™üB<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">1280<img :src="ticketIcon" class="resource-icon" alt="ÊêúÁ¥¢‰ª§">1
                                            </button>
                                            <button 
                                                class="main-story-btn" 
                                                :class="{ active: mainStory.kiranSquareA }"
                                                @click="toggleMainStory('kiranSquareA')">
                                                05Â•áÂÖ∞ÂπøÂú∫A<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">1265<img :src="ticketIcon" class="resource-icon" alt="ÊêúÁ¥¢‰ª§">1
                                            </button>
                                            <button 
                                                class="main-story-btn" 
                                                :class="{ active: mainStory.kiranSquareB }"
                                                @click="toggleMainStory('kiranSquareB')">
                                                06Â•áÂÖ∞ÂπøÂú∫B<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">1230<img :src="ticketIcon" class="resource-icon" alt="ÊêúÁ¥¢‰ª§">1
                                            </button>
                                            <button 
                                                class="main-story-btn" 
                                                :class="{ active: mainStory.carnivalA }"
                                                @click="toggleMainStory('carnivalA')">
                                                07ÂòâÂπ¥ÂçéA<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">1230<img :src="ticketIcon" class="resource-icon" alt="ÊêúÁ¥¢‰ª§">1
                                            </button>
                                            <button 
                                                class="main-story-btn" 
                                                :class="{ active: mainStory.carnivalB }"
                                                @click="toggleMainStory('carnivalB')">
                                                08ÂòâÂπ¥ÂçéB<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">935<img :src="ticketIcon" class="resource-icon" alt="ÊêúÁ¥¢‰ª§">1
                                            </button>
                                            <button 
                                                class="main-story-btn" 
                                                :class="{ active: mainStory.refugeeCampA }"
                                                @click="toggleMainStory('refugeeCampA')">
                                                09ÊµÅÊ∞ëÂØ®A<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">1125<img :src="ticketIcon" class="resource-icon" alt="ÊêúÁ¥¢‰ª§">1
                                            </button>
                                        </div>
                                        <div class="main-story-column">
                                            <button 
                                                class="main-story-btn" 
                                                :class="{ active: mainStory.refugeeCampB }"
                                                @click="toggleMainStory('refugeeCampB')">
                                                10ÊµÅÊ∞ëÂØ®B<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">1195<img :src="ticketIcon" class="resource-icon" alt="ÊêúÁ¥¢‰ª§">1
                                            </button>
                                            <button 
                                                class="main-story-btn" 
                                                :class="{ active: mainStory.muddyDarkTrapA }"
                                                @click="toggleMainStory('muddyDarkTrapA')">
                                                11Ê≤âÊµäÊöóÈò±A<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">1230<img :src="ticketIcon" class="resource-icon" alt="ÊêúÁ¥¢‰ª§">1
                                            </button>
                                            <button 
                                                class="main-story-btn" 
                                                :class="{ active: mainStory.muddyDarkTrapB }"
                                                @click="toggleMainStory('muddyDarkTrapB')">
                                                12Ê≤âÊµäÊöóÈò±B<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">605<img :src="ticketIcon" class="resource-icon" alt="ÊêúÁ¥¢‰ª§">1
                                            </button>
                                            <button 
                                                class="main-story-btn" 
                                                :class="{ active: mainStory.highTowerBlackRing }"
                                                @click="toggleMainStory('highTowerBlackRing')">
                                                13È´òÂ°îÈªëÁéØ<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">1980<img :src="ticketIcon" class="resource-icon" alt="ÊêúÁ¥¢‰ª§">2
                                            </button>
                                            <button 
                                                class="main-story-btn" 
                                                :class="{ active: mainStory.darkSurgeA }"
                                                @click="toggleMainStory('darkSurgeA')">
                                                N1ÊöóÊ∂åA<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">1005<img :src="ticketIcon" class="resource-icon" alt="ÊêúÁ¥¢‰ª§">1
                                            </button>
                                            <button 
                                                class="main-story-btn" 
                                                :class="{ active: mainStory.darkSurgeB }"
                                                @click="toggleMainStory('darkSurgeB')">
                                                N2ÊöóÊ∂åB<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">1005<img :src="ticketIcon" class="resource-icon" alt="ÊêúÁ¥¢‰ª§">1
                                            </button>
                                            <button 
                                                class="main-story-btn" 
                                                :class="{ active: mainStory.goldFeastA }"
                                                @click="toggleMainStory('goldFeastA')">
                                                N3Á¢éÈáëÁõõÂÆ¥A<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">900<img :src="ticketIcon" class="resource-icon" alt="ÊêúÁ¥¢‰ª§">1
                                            </button>
                                            <button 
                                                class="main-story-btn" 
                                                :class="{ active: mainStory.goldFeastB }"
                                                @click="toggleMainStory('goldFeastB')">
                                                N4Á¢éÈáëÁõõÂÆ¥B<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">1180<img :src="ticketIcon" class="resource-icon" alt="ÊêúÁ¥¢‰ª§">1
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Ë°åÂä®Á∫™Ë¶ÅÊ®°Âùó -->
                            <div class="sub-section">
                                <h3 class="sub-title">Ë°åÂä®Á∫™Ë¶Å</h3>
                                <div class="action-summary">
                                    <div class="summary-header" style="background: white; padding: 12px 15px; border-radius: 8px; border: 1px solid #e1e5e9; margin-bottom: 15px;">
                                        <div style="display: flex; align-items: center; gap: 15px;">
                                            <span class="summary-text" style="font-size: 16px; font-weight: bold; color: #1890ff; flex: 1;">
                                                {{ actionSummaryText }}
                                            </span>
                                            <span class="summary-crystal" style="font-size: 14px; font-weight: bold; color: #1890ff; white-space: nowrap;">
                                                <img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂"> {{ actionSummaryCrystal }}
                                            </span>
                                        </div>
                                    </div>
                                    <div class="slider-container">
                                        <input 
                                            type="range" 
                                            v-model.number="actionSummaryLevel" 
                                            min="0" 
                                            max="19"
                                            step="1"
                                            class="score-slider"
                                        >
                                        <div class="slider-value">
                                            ÂΩìÂâçÁä∂ÊÄÅ: {{ actionSummaryText }}
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- ÁãÑÊñØÊöóÂΩ±ÔºàEXÔºâ -->
                            <div class="sub-section">
                                <h3 class="sub-title">ÁãÑÊñØÊöóÂΩ±ÔºàEXÔºâ</h3>
                                <div class="ex-buttons">
                                    <div class="ex-columns">
                                        <div class="ex-column">
                                            <button 
                                                class="ex-btn" 
                                                :class="{ active: darkShadowEx.chaosBeyond }"
                                                @click="toggleDarkShadowEx('chaosBeyond')">
                                                EX01Ê∑∑Ê≤åÂΩºÂ≤∏¬∑ÊöóÂΩ±<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">720
                                            </button>
                                            <button 
                                                class="ex-btn" 
                                                :class="{ active: darkShadowEx.unownedCavern }"
                                                @click="toggleDarkShadowEx('unownedCavern')">
                                                EX02Êó†‰∏ªÂú∞Á™ü¬∑ÊöóÂΩ±<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">720
                                            </button>
                                            <button 
                                                class="ex-btn" 
                                                :class="{ active: darkShadowEx.kiranSquare }"
                                                @click="toggleDarkShadowEx('kiranSquare')">
                                                EX03Â•áÂÖ∞ÂπøÂú∫¬∑ÊöóÂΩ±<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">590
                                            </button>
                                            <button 
                                                class="ex-btn" 
                                                :class="{ active: darkShadowEx.carnival }"
                                                @click="toggleDarkShadowEx('carnival')">
                                                EX04ÂòâÂπ¥Âçé¬∑ÊöóÂΩ±<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">650
                                            </button>
                                        </div>
                                        <div class="ex-column">
                                            <button 
                                                class="ex-btn" 
                                                :class="{ active: darkShadowEx.highTowerBlackRing }"
                                                @click="toggleDarkShadowEx('highTowerBlackRing')">
                                                EX05È´òÂ°îÈªëÁéØ¬∑ÊöóÂΩ±<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">650
                                            </button>
                                            <button 
                                                class="ex-btn" 
                                                :class="{ active: darkShadowEx.luxuryFeastFog }"
                                                @click="toggleDarkShadowEx('luxuryFeastFog')">
                                                EX06Â•¢ÂÆ¥ÊµìÈõæ¬∑ÊöóÂΩ±<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">650
                                            </button>
                                            <button 
                                                class="ex-btn" 
                                                :class="{ active: darkShadowEx.drowningRainCity }"
                                                @click="toggleDarkShadowEx('drowningRainCity')">
                                                EX07Ê∫∫Èõ®ÂûÇÂüé¬∑ÊöóÂΩ±<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">650
                                            </button>
                                            <button 
                                                class="ex-btn" 
                                                :class="{ active: darkShadowEx.goldFeast }"
                                                @click="toggleDarkShadowEx('goldFeast')">
                                                EX08Á¢éÈáëÁõõÂÆ¥¬∑ÊöóÂΩ±<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">650
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- ËÆ∞ÂøÜÈ£éÊö¥ -->
                            <div class="sub-section">
                                <h3 class="sub-title">ËÆ∞ÂøÜÈ£éÊö¥</h3>
                                <div class="memory-storm-buttons">
                                    <button 
                                        class="memory-storm-btn" 
                                        :class="{ active: memoryStorm.memoryAnomaly }"
                                        @click="toggleMemoryStorm('memoryAnomaly')">
                                        ËÆ∞ÂøÜÁï∏ÁÇπ<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">350
                                    </button>
                                    <button 
                                        class="memory-storm-btn" 
                                        :class="{ active: memoryStorm.impressionAnomaly }"
                                        @click="toggleMemoryStorm('impressionAnomaly')">
                                        Âç∞Ë±°Áï∏ÁÇπ<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">350
                                    </button>
                                    <button 
                                        class="memory-storm-btn" 
                                        :class="{ active: memoryStorm.echoAnomaly }"
                                        @click="toggleMemoryStorm('echoAnomaly')">
                                        ÊÆãÂìçÁï∏ÁÇπ<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">350
                                    </button>
                                </div>
                            </div>

                            <!-- Ê±°Êüì‰πãÂ∑¢ -->
                            <div class="sub-section">
                                <h3 class="sub-title">Ê±°Êüì‰πãÂ∑¢</h3>
                                <div class="pollution-nest-buttons">
                                    <button 
                                        class="pollution-nest-btn" 
                                        :class="{ active: pollutionNest.forbiddenZoneProbe }"
                                        @click="togglePollutionNest('forbiddenZoneProbe')">
                                        Á¶ÅÂå∫Êé¢Êü•<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">350
                                    </button>
                                    <button 
                                        class="pollution-nest-btn" 
                                        :class="{ active: pollutionNest.extremeDomainSearch }"
                                        @click="togglePollutionNest('extremeDomainSearch')">
                                        ÊûÅÂüüÊêúÂØª<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">210
                                    </button>
                                </div>
                            </div>

                            <!-- Ê∏ÖÂâøË°åÂä® -->
                            <div class="sub-section">
                                <h3 class="sub-title">Ê∏ÖÂâøË°åÂä®</h3>
                                <div class="cleanup-operation-buttons">
                                    <button 
                                        class="cleanup-operation-btn" 
                                        :class="{ active: cleanupOperation.goldRush }"
                                        @click="toggleCleanupOperation('goldRush')">
                                        Ê∑òÈáëÁãÇÁÉ≠<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">350
                                    </button>
                                    <button 
                                        class="cleanup-operation-btn" 
                                        :class="{ active: cleanupOperation.ominousSeed }"
                                        @click="toggleCleanupOperation('ominousSeed')">
                                        ÊÅ∂ÂÖÜ‰πãÁßç<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">350
                                    </button>
                                </div>
                            </div>

                            <!-- Â∏ïÂ∞îÈ©¨Â∫üÂ¢ü -->
                            <div class="sub-section">
                                <h3 class="sub-title">Â∏ïÂ∞îÈ©¨Â∫üÂ¢ü</h3>
                                <div class="palma-ruins-buttons">
                                    <div class="palma-ruins-row">
                                        <button 
                                            class="palma-ruins-btn" 
                                            :class="{ active: palmaRuins.tenacious }"
                                            @click="togglePalmaRuins('tenacious')">
                                            ÂùöÈüß<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">280
                                        </button>
                                        <button 
                                            class="palma-ruins-btn" 
                                            :class="{ active: palmaRuins.berserk }"
                                            @click="togglePalmaRuins('berserk')">
                                            ÁãÇÊö¥<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">280
                                        </button>
                                    </div>
                                    <div class="palma-ruins-row">
                                        <button 
                                            class="palma-ruins-btn" 
                                            :class="{ active: palmaRuins.mysterious }"
                                            @click="togglePalmaRuins('mysterious')">
                                            ËØ°Áßò<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">280
                                        </button>
                                        <button 
                                            class="palma-ruins-btn" 
                                            :class="{ active: palmaRuins.precise }"
                                            @click="togglePalmaRuins('precise')">
                                            Á≤æÂáÜ<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">280
                                        </button>
                                    </div>
                                    <div class="palma-ruins-row">
                                        <button 
                                            class="palma-ruins-btn" 
                                            :class="{ active: palmaRuins.supernatural }"
                                            @click="togglePalmaRuins('supernatural')">
                                            ÂºÇËÉΩ<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">280
                                        </button>
                                        <button 
                                            class="palma-ruins-btn" 
                                            :class="{ active: palmaRuins.inspiration }"
                                            @click="togglePalmaRuins('inspiration')">
                                            ÂêØËø™<img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂">280
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                        </div>
                    </div>


                    <!-- Ê∞™ÈáëËµÑÊ∫êÊ®°Âùó -->
                    <div class="potential-section card">
                        <h2 @click="toggleSection('recharge')" class="section-header">
                            üí∞ Ê∞™ÈáëËµÑÊ∫ê
                            <span class="collapse-icon">{{ sections.recharge ? '‚àí' : '+' }}</span>
                        </h2>
                        <div v-if="sections.recharge" class="section-content">
                            <!-- ÊúàÂç°Ë¥≠‰π∞ÊéßÂà∂ -->
                            <div class="sub-section">
                                <h3 class="sub-title">ÈªëÈí•Ë¥µÂÆæÔºàÂ∞èÊúàÂç°Ôºâ</h3>
                                
                                <div class="resource-input-vertical" style="margin-bottom: 15px;">
                                    <label style="min-width: 200px; display: flex; align-items: center; gap: 5px;">
                                        È¢ùÂ§ñË¥≠‰π∞
                                        <button class="skin-btn" @click="adjustMonthlyCard(-1)">‚àí</button>
                                        <span class="skin-count" style="min-width: 40px; text-align: center;">{{ monthlyCardCount }}</span>
                                        <button class="skin-btn" @click="adjustMonthlyCard(1)">+</button>
                                        Âº†ÊúàÂç°(Ë¥üÊï∞‰ª£Ë°®Â∑≤ÊèêÂâçË¥≠‰π∞)Ôºö
                                    </label>
                                </div>
                                
                                <div style="font-size: 12px; color: #666; margin-bottom: 15px;">
                                    È¢ùÂ§ñË¥≠‰π∞‰∏ÄÂº†ÊúàÂç°ÂèØÊèêÂâçÊãøÂà∞300ÁíÄÁí®Êô∂Ê∫êÔºåÂ∑≤ÊèêÂâçË¥≠‰π∞ÂàôÂè™ËÉΩÊãøÂà∞ÊØèÊó•60ÂºÇÊñπÊô∂Ôºå‰∏çËÆ°ÁÆó30RMB
                                </div>
                                
                                <!-- ÊúàÂç°Â•ñÂä±ÊåâÈíÆ -->
                                <button 
                                    class="training-btn" 
                                    :class="{ active: monthlyCardActive }"
                                    @click="toggleMonthlyCard"
                                    style="width: calc(100% - 30px); margin: 0 auto 15px; display: block;">
                                    ÈªëÈí•Ë¥µÂÆæ 
                                    <img :src="premiumCrystalIcon" class="resource-icon" alt="ÁíÄÁí®Êô∂Ê∫ê"> {{ monthlyCardPremiumCrystal }} 
                                    <img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂"> {{ monthlyCardCrystal }}
                                </button>
                            </div>

                            <!-- È´òÁ∫ßÁõëÂØüÂØÜ‰ª§Ê®°Âùó -->
                            <div class="sub-section">
                                <h3 class="sub-title">È´òÁ∫ßÁõëÂØüÂØÜ‰ª§ÔºàÂ§ßÊúàÂç°Ôºâ</h3>
                                
                                <div class="resource-input-vertical" style="margin-bottom: 15px;">
                                    <label style="min-width: 200px; display: flex; align-items: center; gap: 5px;">
                                        È¢ùÂ§ñË¥≠‰π∞
                                        <button class="skin-btn" @click="adjustInspectionOrder(-1)">‚àí</button>
                                        <span class="skin-count" style="min-width: 40px; text-align: center;">{{ inspectionOrderCount }}</span>
                                        <button class="skin-btn" @click="adjustInspectionOrder(1)">+</button>
                                        ÊúüÈ´òÁ∫ßÁõëÂØüÂØÜ‰ª§(Ë¥üÊï∞‰ª£Ë°®Â∑≤ÊèêÂâçË¥≠‰π∞)Ôºö
                                    </label>
                                </div>
                                
                                <div style="font-size: 12px; color: #666; margin-bottom: 15px;">
                                    È¢ùÂ§ñË¥≠‰π∞ÁöÑÈ´òÁ∫ßÁõëÂØüÂØÜ‰ª§ÈªòËÆ§ÂèØÊãøÂà∞ÂΩìÊúüÂ•ñÂä±ÔºåÂ∑≤ÊèêÂâçË¥≠‰π∞Âàô‰∏çËÆ°ÁÆó68RMB
                                </div>
                                
                                <!-- È´òÁ∫ßÁõëÂØüÂØÜ‰ª§Â•ñÂä±ÊåâÈíÆ -->
                                <button 
                                    class="training-btn" 
                                    :class="{ active: inspectionOrderActive }"
                                    @click="toggleInspectionOrder"
                                    style="width: calc(100% - 30px); margin: 0 auto 15px; display: block;">
                                    È´òÁ∫ßÁõëÂØüÂØÜ‰ª§ 
                                    <img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂"> {{ inspectionOrderCrystalAmount }} 
                                    <img :src="ticketIcon" class="resource-icon" alt="ÊêúÁ¥¢‰ª§"> {{ inspectionOrderTicketAmount }}
                                </button>
                            </div>

                            <!-- ÁãÑÊñØÁõàÊª°ÈíµÊ®°Âùó -->
                            <div class="sub-section">
                                <h3 class="sub-title" style="display: flex; justify-content: space-between; align-items: center;">
                                    <span>ÁãÑÊñØÁõàÊª°Èíµ</span>
                                    <div class="switch-group" style="margin: 0;">
                                        <span class="switch-label" :class="{ active: !disiPrePurchased, inactive: disiPrePurchased }">Êú™È¢ÑÂÖàË¥≠‰π∞</span>
                                        <label class="switch">
                                            <input type="checkbox" v-model="disiPrePurchased" :disabled="!disiActive">
                                            <span class="slider"></span>
                                        </label>
                                        <span class="switch-label" :class="{ active: disiPrePurchased, inactive: !disiPrePurchased }">Â∑≤È¢ÑÂÖàË¥≠‰π∞</span>
                                    </div>
                                </h3>
                                
                                <button 
                                    class="training-btn" 
                                    :class="{ active: disiActive }"
                                    @click="toggleDisi"
                                    style="width: calc(100% - 30px); margin: 0 auto 15px; display: block;">
                                    ÁãÑÊñØÁõàÊª°Èíµ
                                    <img :src="premiumCrystalIcon" class="resource-icon" alt="ÁíÄÁí®Êô∂Ê∫ê"> {{ disiPremiumCrystal }} 
                                    <img :src="crystalIcon" class="resource-icon" alt="ÂºÇÊñπÊô∂"> {{ disiRewardTotal }}
                                </button>
                                
                                <div class="slider-container">
                                    <div class="slider-labels">
                                        <span>0Á∫ß</span>
                                        <span>50Á∫ß</span>
                                    </div>
                                    <input 
                                        type="range" 
                                        v-model.number="disiLevel" 
                                        min="0" 
                                        max="50"
                                        step="1"
                                        class="inspection-slider"
                                        list="disi-levels"
                                        @input="snapDisiLevel"
                                        :disabled="!disiActive"
                                    >
                                    <datalist id="disi-levels">
                                        <option value="0">0</option>
                                        <option value="5">5</option>
                                        <option value="10">10</option>
                                        <option value="15">15</option>
                                        <option value="20">20</option>
                                        <option value="25">25</option>
                                        <option value="30">30</option>
                                        <option value="35">35</option>
                                        <option value="40">40</option>
                                        <option value="42">42</option>
                                        <option value="44">44</option>
                                        <option value="46">46</option>
                                        <option value="48">48</option>
                                        <option value="50">50</option>
                                    </datalist>
                                    <div class="slider-value">
                                        ÂΩìÂâçÁ≠âÁ∫ß: {{ disiLevel }}
                                    </div>
                                </div>
                            </div>

                            <!-- ËØ°ÁèëÁèçÂÆùÈ¶ÜÊ®°Âùó -->
                            <div class="sub-section">
                                <h3 class="sub-title" style="display: flex; justify-content: space-between; align-items: center;">
                                    <span>ËØ°ÁèëÁèçÂÆùÈ¶Ü</span>
                                    <div class="switch-group" style="margin: 0;">
                                        <span class="switch-label" :class="{ active: !treasurePrePurchased, inactive: treasurePrePurchased }">Êú™È¢ÑÂÖàË¥≠‰π∞</span>
                                        <label class="switch">
                                            <input type="checkbox" v-model="treasurePrePurchased" :disabled="!treasureActive">
                                            <span class="slider"></span>
                                        </label>
                                        <span class="switch-label" :class="{ active: treasurePrePurchased, inactive: !treasurePrePurchased }">Â∑≤È¢ÑÂÖàË¥≠‰π∞</span>
                                    </div>
                                </h3>
                                
                                <button 
                                    class="training-btn" 
                                    :class="{ active: treasureActive }"
                                    @click="toggleTreasure"
                                    style="width: calc(100% - 30px); margin: 0 auto 15px; display: block;">
                                    ËØ°ÁèëÁèçÂÆùÈ¶Ü 
                                    <img :src="ticketIcon" class="resource-icon" alt="ÊêúÁ¥¢‰ª§"> {{ treasureTickets }}
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp } = Vue;

        const app = createApp({
            name: 'GachaCalculator',
            data() {
                let savedData = {};
                try {
                    const saved = localStorage.getItem('gachaCalculatorData');
                    if (saved) {
                        savedData = JSON.parse(saved);
                        // È™åËØÅÊï∞ÊçÆÂÆåÊï¥ÊÄß
                        if (typeof savedData !== 'object') {
                            throw new Error('Invalid data format');
                        }
                    }
                } catch (e) {
                    console.error('Ëß£ÊûêlocalStorageÂ§±Ë¥•ÔºåÊ∏ÖÈô§ÊçüÂùèÊï∞ÊçÆÂπ∂‰ΩøÁî®ÈªòËÆ§Êï∞ÊçÆ', e);
                    localStorage.removeItem('gachaCalculatorData'); // Ê∏ÖÈô§ÊçüÂùèÊï∞ÊçÆ
                    savedData = {};
                }                
                return {
                    // ÂõæÊ†áË∑ØÂæÑ - ‰ΩøÁî®ÁªùÂØπË∑ØÂæÑ
                    crystalIcon: 'icons/crystal.png',
                    ticketIcon: 'icons/ticket.png',
                    redCrystalIcon: 'icons/red_crystal.png',
                    premiumCrystalIcon: 'icons/premium_crystal.png',
                    yellowTicketIcon: 'icons/yellow_ticket.png',
                    hlIcon:'icons/hl.gif',

                    actionSummaryLevel: savedData?.actionSummaryLevel || 0,
                    actionSummaryList: [
                        "01¬∑Ê∑∑Ê≤åÂΩºÂ≤∏",
                        "02¬∑Ê∑∑Ê≤åÂΩºÂ≤∏", 
                        "03¬∑Êó†‰∏ªÂú∞Á™ü",
                        "04¬∑Êó†‰∏ªÂú∞Á™ü",
                        "05¬∑Â•áÂÖ∞ÂπøÂú∫",
                        "06¬∑Â•áÂÖ∞ÂπøÂú∫",
                        "07¬∑ÂòâÂπ¥Âçé",
                        "08¬∑ÂòâÂπ¥Âçé",
                        "09¬∑ÊµÅÊ∞ëÂØ®",
                        "10¬∑ÊµÅÊ∞ëÂØ®",
                        "11¬∑Ê≤âÊµäÊöóÈò±",
                        "12¬∑Ê≤âÊµäÊöóÈò±",
                        "13¬∑È´òÂ°îÈªëÁéØ",
                        "N1¬∑ÊöóÊ∂å",
                        "N2¬∑ÊöóÊ∂å", 
                        "N3¬∑Á¢éÈáëÁõõÂÆ¥",
                        "N4¬∑Á¢éÈáëÁõõÂÆ¥",
                        "N5¬∑ÊÆãÈîã",
                        "N6¬∑ÊÆãÈîã"
                    ],

                    // ÂéüÊúâÊï∞ÊçÆ‰øùÊåÅ‰∏çÂèò
                    resources: savedData?.resources || {
                        crystal: 0,
                        premiumCrystal: 0,
                        tickets: 0
                    },
                    selectedTime: savedData?.selectedTime || 'nextVersion',
                    calculateToPoolEnd: savedData?.calculateToPoolEnd || false,
                    weeklyCompleted: savedData?.weeklyCompleted || false,
                    darkZoneSweepOnly: savedData?.darkZoneSweepOnly || false,
                    darkZoneCompleted: savedData?.darkZoneCompleted || false,
                    darkZoneFirstCompleted: savedData?.darkZoneFirstCompleted || false,
                    trackingExchanged: savedData?.trackingExchanged || false,
                    friendshipExchanged: savedData?.friendshipExchanged || false,
                    usePremiumCrystal: savedData?.usePremiumCrystal || false,
                    skinReserve: savedData?.skinReserve || {
                        skin880: 0,
                        skin1280: 0,
                        skin2580: 0
                    },
                    customAdjustment: savedData?.customAdjustment || 0,
                    sections: {
                        resources: true,
                        daily: true,
                        potential: true,
                        pullSummary: true,
                        recharge: true  // Êñ∞Â¢ûËøô‰∏ÄË°å
                    },
                    versionWeeks: 4,
                    monthlyCardCount: savedData?.monthlyCardCount || 0,
                    monthlyCardActive: savedData?.monthlyCardActive || false,
                    inspectionOrderActive: savedData?.inspectionOrderActive || false,
                    inspectionOrderCount: savedData?.inspectionOrderCount || 0,
                    dailyInspectionOrderLevel: savedData?.dailyInspectionOrderLevel || 0,
                    
                    emotionDetectionCompleted: savedData?.emotionDetectionCompleted || false,
                    signInRewardCompleted: savedData?.signInRewardCompleted || false,
                    dailyShareCompleted: savedData?.dailyShareCompleted || false,
                    trackingCertificationCount: savedData?.trackingCertificationCount || 0,
                    useTrackingCertification: savedData?.useTrackingCertification || false,
                    trainingModes: savedData?.trainingModes || {
                        steady: false,
                        fluctuating: false,
                        outOfControl: false,
                        crazy: false
                    },
                    
                    nightmareScore: savedData?.nightmareScore || 0,
                    nightmareSeaCompleted: savedData?.nightmareSeaCompleted || false,
                    
                    dataGap: savedData?.dataGap || {
                        targets: {
                            missionComplete: false,
                            missionCount: false,
                            targetComplete: false
                        },
                        ratings: {
                            healing: false,
                            shield: false,
                            controlTime: false,
                            controlCount: false,
                            totalDamage: false,
                            coreDamage: false,
                            comprehensive: false
                        }
                    },

                    // Êñ∞Â¢ûÊ®°ÂùóÊï∞ÊçÆ
                    mainStory: savedData?.mainStory || {
                        chaosBeyondA: false,
                        chaosBeyondB: false,
                        unownedCavernA: false,
                        unownedCavernB: false,
                        kiranSquareA: false,
                        kiranSquareB: false,
                        carnivalA: false,
                        carnivalB: false,
                        refugeeCampA: false,
                        refugeeCampB: false,
                        muddyDarkTrapA: false,
                        muddyDarkTrapB: false,
                        highTowerBlackRing: false,
                        darkSurgeA: false,
                        darkSurgeB: false,
                        goldFeastA: false,
                        goldFeastB: false
                    },

                    // ÁãÑÊñØÊöóÂΩ±ÔºàEXÔºâÊï∞ÊçÆ
                    darkShadowEx: savedData?.darkShadowEx || {
                        chaosBeyond: false,
                        unownedCavern: false,
                        kiranSquare: false,
                        carnival: false,
                        highTowerBlackRing: false,
                        luxuryFeastFog: false,
                        drowningRainCity: false,
                        goldFeast: false
                    },

                    memoryStorm: savedData?.memoryStorm || {
                        memoryAnomaly: false,
                        impressionAnomaly: false,
                        echoAnomaly: false
                    },

                    pollutionNest: savedData?.pollutionNest || {
                        forbiddenZoneProbe: false,
                        extremeDomainSearch: false
                    },

                    cleanupOperation: savedData?.cleanupOperation || {
                        goldRush: false,
                        ominousSeed: false
                    },

                    palmaRuins: savedData?.palmaRuins || {
                        tenacious: false,
                        berserk: false,
                        mysterious: false,
                        precise: false,
                        supernatural: false,
                        inspiration: false
                    },
                    
                    // Êñ∞Â¢ûËßíËâ≤ÂÖªÊàêÊ®°ÂùóÊï∞ÊçÆ
                    characterDevelopment: savedData?.characterDevelopment || {
                        tier3: 0,
                        maxReverbS: 0,
                        maxReverbA: 0,
                        maxReverbB: 0,
                        reviewS: 0,
                        reviewA: 0,
                        haylaReviewed: false
                    },
                    
                    nightmareRewards: [
                        { score: 1000, crystal: 100, tickets: 0 },
                        { score: 2000, crystal: 0, tickets: 1 },
                        { score: 3000, crystal: 150, tickets: 0 },
                        { score: 4000, crystal: 0, tickets: 1 },
                        { score: 5000, crystal: 150, tickets: 0 },
                        { score: 6000, crystal: 200, tickets: 0 },
                        { score: 7000, crystal: 200, tickets: 0 },
                        { score: 8000, crystal: 0, tickets: 1 },
                        { score: 10000, crystal: 100, tickets: 0 },
                        { score: 12000, crystal: 100, tickets: 0 },
                        { score: 14000, crystal: 100, tickets: 0 },
                        { score: 16000, crystal: 100, tickets: 0 },
                        { score: 18000, crystal: 100, tickets: 0 },
                        { score: 20000, crystal: 100, tickets: 0 },
                        { score: 22000, crystal: 100, tickets: 0 },
                        { score: 24000, crystal: 0, tickets: 1 },
                        { score: 26000, crystal: 100, tickets: 0 },
                        { score: 28000, crystal: 100, tickets: 0 },
                        { score: 30000, crystal: 100, tickets: 0 },
                        { score: 32000, crystal: 100, tickets: 0 },
                        { score: 34000, crystal: 100, tickets: 0 },
                        { score: 36000, crystal: 0, tickets: 1 },
                        { score: 38000, crystal: 100, tickets: 0 },
                        { score: 40000, crystal: 100, tickets: 0 },
                        { score: 42000, crystal: 100, tickets: 0 },
                        { score: 44000, crystal: 100, tickets: 0 },
                        { score: 46000, crystal: 100, tickets: 0 },
                        { score: 48000, crystal: 0, tickets: 1 },
                        { score: 50000, crystal: 100, tickets: 0 },
                        { score: 52000, crystal: 100, tickets: 0 },
                        { score: 54000, crystal: 100, tickets: 0 },
                        { score: 56000, crystal: 100, tickets: 0 },
                        { score: 58000, crystal: 100, tickets: 0 },
                        { score: 60000, crystal: 0, tickets: 1 }
                    ],
                    // ÁãÑÊñØÁõàÊª°ÈíµÊï∞ÊçÆ
                    disiLevel: savedData?.disiLevel || 0,
                    disiActive: savedData?.disiActive || false,
                    disiPrePurchased: savedData?.disiPrePurchased || false,
                    // ËØ°ÁèëÁèçÂÆùÈ¶ÜÊï∞ÊçÆ
                    treasureActive: savedData?.treasureActive || false,
                    treasurePrePurchased: savedData?.treasurePrePurchased || false,
                    disiRewards: [
                        { level: 0, crystal: 0 },
                        { level: 5, crystal: 400 },
                        { level: 10, crystal: 400 },
                        { level: 15, crystal: 500 },
                        { level: 20, crystal: 500 },
                        { level: 25, crystal: 600 },
                        { level: 30, crystal: 600 },
                        { level: 35, crystal: 600 },
                        { level: 40, crystal: 800 },
                        { level: 42, crystal: 800 },
                        { level: 44, crystal: 800 },
                        { level: 46, crystal: 1000 },
                        { level: 48, crystal: 1000 },
                        { level: 50, crystal: 1800 }
                    ]
                }
            },
            computed: {

                // Êó•Â∏∏ÁßØÁ¥ØÊ®°ÂùóÁöÑÊêúÁ¥¢‰ª§ËÆ°ÁÆó
                dailyInspectionOrderTickets() {
                    let tickets = 0;
                    const levels = [5, 15, 25, 35, 45, 55];
                    
                    for (const level of levels) {
                        if (this.dailyInspectionOrderLevel < level) {
                            tickets += 1;
                        }
                    }
                    
                    const periods = this.calculateInspectionPeriods;
                    const totalPerPeriod = 6;
                    
                    return tickets + (periods - 1) * totalPerPeriod;
                },

                // Êñ∞Â¢ûË°åÂä®Á∫™Ë¶ÅÂºÇÊñπÊô∂ËÆ°ÁÆó
                actionSummaryCrystal() {
                    // ÊÄªÂºÇÊñπÊô∂3800ÔºåÊªëÂùó‰ªé0Âà∞18ÔºåÊØèÊªëÂä®‰∏ÄÊ†ºÂáèÂ∞ë200
                    const totalCrystal = 3800;
                    const crystalPerStep = 200;
                    return totalCrystal - (this.actionSummaryLevel * crystalPerStep);
                },

                daysToNextVersion() {
                    const today = new Date();
                    const targetDate = new Date(2025, 10, 20);
                    const diffTime = targetDate - today;
                    return Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                },
                
                daysToNewYear() {
                    const today = new Date();
                    const targetDate = new Date(2026, 1, 17);
                    const diffTime = targetDate - today;
                    return Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                },
                
                selectedDays() {
                    const baseDays = this.selectedTime === 'nextVersion' 
                        ? this.daysToNextVersion 
                        : this.daysToNewYear;
                    return this.calculateToPoolEnd ? baseDays + (this.versionWeeks * 7) : baseDays;
                },
                
                weeklyCount() {
                    const today = new Date();
                    let targetDate = this.selectedTime === 'nextVersion' 
                        ? new Date(2025, 10, 20) 
                        : new Date(2026, 1, 17);
                    
                    // Â¶ÇÊûúËÆ°ÁÆóÂà∞Âç°Ê±†ÁªìÊùüÔºåÂàôÂä†‰∏äÁâàÊú¨Âë®Êï∞
                    if (this.calculateToPoolEnd) {
                        targetDate = new Date(targetDate.getTime() + (this.versionWeeks * 7 * 24 * 60 * 60 * 1000));
                    }
                    
                    // ËÆ°ÁÆó‰ªéÂΩìÂâçÂë®‰∏ÄÂà∞ÁõÆÊ†áÊó•Êúü‰πãÈó¥ÁöÑÂÆåÊï¥Âë®Êï∞
                    const currentMonday = new Date(today);
                    const dayOfWeek = today.getDay(); // 0ÊòØÂë®Êó•Ôºå1ÊòØÂë®‰∏ÄÔºå...6ÊòØÂë®ÂÖ≠
                    const daysToMonday = dayOfWeek === 0 ? 1 : (dayOfWeek === 1 ? 0 : 8 - dayOfWeek);
                    currentMonday.setDate(today.getDate() - (dayOfWeek === 0 ? 6 : dayOfWeek - 1));
                    
                    // ËÆ°ÁÆóÂë®Êï∞ÔºàÂåÖÂê´ÂΩìÂâçÂë®Ôºâ
                    const diffTime = targetDate - currentMonday;
                    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                    const diffWeeks = Math.ceil(diffDays / 7);
                    
                    return Math.max(1, diffWeeks); // Ëá≥Â∞ë1Âë®
                },

                remainingWeeklyCount() {
                    // Â¶ÇÊûúÊú¨Âë®Â∑≤ÂÆåÊàêÔºåÂàô‰ªé‰∏ãÂë®ÂºÄÂßãËÆ°ÁÆó
                    if (this.weeklyCompleted) {
                        return Math.max(0, this.weeklyCount - 1);
                    } else {
                        return this.weeklyCount;
                    }
                },

                remainingShareWeeks() {
                    // ÂàÜ‰∫´Âë®Êï∞ËÆ°ÁÆóÈÄªËæë‰∏éÂë®Â∏∏Áõ∏Âêå
                    if (this.dailyShareCompleted) {
                        return Math.max(0, this.weeklyCount - 1);
                    } else {
                        return this.weeklyCount;
                    }
                },

                remainingShareTotal() {
                    return 60 * this.remainingShareWeeks;
                },

                remainingDarkZoneWeeks() {
                    // ÊöóÂüüÂë®Êï∞ËÆ°ÁÆóÈÄªËæë‰∏éÂë®Â∏∏Áõ∏Âêå
                    if (this.darkZoneCompleted) {
                        return Math.max(0, this.weeklyCount - 1);
                    } else {
                        return this.weeklyCount;
                    }
                },
                
                darkZonePerWeek() {
                    return this.darkZoneSweepOnly ? 450 : 510;
                },
                
                dailyActiveTotal() {
                    return 40 * this.selectedDays;
                },
                
                remainingWeeklyTotal() {
                    return 150 * this.remainingWeeklyCount;
                },
                
                remainingDarkZoneTotal() {
                    return this.darkZonePerWeek * this.remainingDarkZoneWeeks;
                },
                
                remainingTrackingExchange() {
                    return this.trackingExchanged ? 0 : 5;
                },
                
                remainingFriendshipExchange() {
                    return this.friendshipExchanged ? 0 : 3;
                },
                
                trackingCertificationTickets() {
                    return this.useTrackingCertification ? Math.floor(this.trackingCertificationCount / 8) : 0;
                },
                
                nightmareCrystalReward() {
                    return this.calculateNightmareRewards().crystal;
                },

                nightmareTicketReward() {
                    return this.calculateNightmareRewards().tickets;
                },
                
                nightmareSeaReward() {
                    return this.nightmareSeaCompleted ? 0 : 930;
                },
                
                totalWeeklyActive() {
                    // ‰ΩøÁî®Ââ©‰ΩôÂë®Êï∞ËÆ°ÁÆóÈÄªËæë
                    return 150 * this.remainingWeeklyCount;
                },
                
                totalDarkZone() {
                    // ‰ΩøÁî®Ââ©‰ΩôÊöóÂüüÂë®Êï∞ËÆ°ÁÆóÈÄªËæë
                    return this.darkZonePerWeek * this.remainingDarkZoneWeeks;
                },
                
                totalDarkZoneFirst() {
                    return this.darkZoneFirstCompleted ? 0 : 450;
                },
                
                // ËÆ°ÁÆó‰ªéÁé∞Âú®Âà∞ÁõÆÊ†áÊó•Êúü‰πãÈó¥ÁöÑÊúà‰ªΩÊï∞
                remainingMonths() {
                    const today = new Date();
                    let targetDate = this.selectedTime === 'nextVersion' 
                        ? new Date(2025, 10, 20)  // 2025Âπ¥11Êúà20Êó•
                        : new Date(2026, 1, 17);  // 2026Âπ¥2Êúà17Êó•
                    
                    // Â¶ÇÊûúËÆ°ÁÆóÂà∞Âç°Ê±†ÁªìÊùüÔºåÂàôÂä†‰∏äÁâàÊú¨Âë®Êï∞
                    if (this.calculateToPoolEnd) {
                        targetDate = new Date(targetDate.getTime() + (this.versionWeeks * 7 * 24 * 60 * 60 * 1000));
                    }
                    
                    // Ê≠£Á°ÆÁöÑËÆ°ÁÆóÊñπÊ≥ïÔºöËÆ°ÁÆóË∑®Ë∂äÁöÑÊúà‰ªΩÊï∞ÔºàÂåÖÂê´Ëµ∑ÂßãÊúàÂíåÁªìÊùüÊúàÔºâ
                    let months = (targetDate.getFullYear() - today.getFullYear()) * 12;
                    months += targetDate.getMonth() - today.getMonth();
                    
                    // Â¶ÇÊûúÁõÆÊ†áÊó•ÊúüÁöÑÊó•ÊúüÂ§ß‰∫éÁ≠â‰∫é‰ªäÂ§©ÁöÑÊó•ÊúüÔºåÂàôÂä†1‰∏™ÊúàÔºàÂåÖÂê´ÂΩìÂâçÊúàÔºâ
                    if (targetDate.getDate() >= today.getDate()) {
                        months++;
                    } else {
                        // Â¶ÇÊûúÁõÆÊ†áÊó•ÊúüÁöÑÊó•ÊúüÂ∞è‰∫é‰ªäÂ§©ÁöÑÊó•ÊúüÔºå‰ΩÜËøòÂú®Âêå‰∏Ä‰∏™ÊúàÂÜÖÔºå‰πüË¶ÅÂåÖÂê´ÂΩìÂâçÊúà
                        months++;
                    }
                    
                    // Á°Æ‰øùËá≥Â∞ë‰∏∫1‰∏™Êúà
                    return Math.max(1, months);
                },

                totalEmotionDetection() {
                    // ÂºÄÂÖ≥ÊâìÂºÄÔºàÂ∑≤ÂÆåÊàêÊú¨ÊúàÔºâÔºöÊòæÁ§∫Ââ©‰ΩôÊúà‰ªΩ-1ÁöÑÂ•ñÂä±
                    // ÂºÄÂÖ≥ÂÖ≥Èó≠ÔºàÊú™ÂÆåÊàêÊú¨ÊúàÔºâÔºöÊòæÁ§∫ÊÄªÊúà‰ªΩÊï∞ÁöÑÂ•ñÂä±
                    const monthlyReward = 50;
                    if (this.emotionDetectionCompleted) {
                        return Math.max(0, (this.remainingMonths - 1)) * monthlyReward;
                    } else {
                        return this.remainingMonths * monthlyReward;
                    }
                },

                totalEmotionDetectionTickets() {
                    const monthlyReward = 1;
                    if (this.emotionDetectionCompleted) {
                        return Math.max(0, (this.remainingMonths - 1)) * monthlyReward;
                    } else {
                        return this.remainingMonths * monthlyReward;
                    }
                },

                totalSignInReward() {
                    const monthlyReward = 100;
                    if (this.signInRewardCompleted) {
                        return Math.max(0, (this.remainingMonths - 1)) * monthlyReward;
                    } else {
                        return this.remainingMonths * monthlyReward;
                    }
                },

                totalSignInRewardTickets() {
                    const monthlyReward = 1;
                    if (this.signInRewardCompleted) {
                        return Math.max(0, (this.remainingMonths - 1)) * monthlyReward;
                    } else {
                        return this.remainingMonths * monthlyReward;
                    }
                },
                
                totalSignInRewardTickets() {
                    const monthlyReward = 1;
                    if (this.signInRewardCompleted) {
                        return 0; // ÊòæÁ§∫‰∏∫0
                    } else {
                        return this.remainingMonths * monthlyReward;
                    }
                },

                // Êñ∞Â¢ûÔºöÁî®‰∫éÊÄªËÆ°ËÆ°ÁÆóÁöÑÂ•ñÂä±Ôºà‰∏çËÄÉËôëÊòæÁ§∫ÔºåÂè™ËÄÉËôëÂÆûÈôÖÂèØËé∑ÂæóÂ•ñÂä±Ôºâ
                totalEmotionDetectionForSummary() {
                    const monthlyReward = 50;
                    if (this.emotionDetectionCompleted) {
                        // Â∑≤ÂÆåÊàêÊú¨ÊúàÔºåÂè™ËÉΩËé∑ÂæóÂâ©‰ΩôÊúà‰ªΩÁöÑÂ•ñÂä±
                        return Math.max(0, (this.remainingMonths - 1)) * monthlyReward;
                    } else {
                        // Êú™ÂÆåÊàêÊú¨ÊúàÔºåÂèØ‰ª•Ëé∑ÂæóÂÖ®ÈÉ®Êúà‰ªΩÁöÑÂ•ñÂä±
                        return this.remainingMonths * monthlyReward;
                    }
                },
                
                totalEmotionDetectionTicketsForSummary() {
                    const monthlyReward = 1;
                    if (this.emotionDetectionCompleted) {
                        return Math.max(0, (this.remainingMonths - 1)) * monthlyReward;
                    } else {
                        return this.remainingMonths * monthlyReward;
                    }
                },

                totalSignInRewardForSummary() {
                    const monthlyReward = 100;
                    if (this.signInRewardCompleted) {
                        return Math.max(0, (this.remainingMonths - 1)) * monthlyReward;
                    } else {
                        return this.remainingMonths * monthlyReward;
                    }
                },
                
                totalSignInRewardTicketsForSummary() {
                    const monthlyReward = 1;
                    if (this.signInRewardCompleted) {
                        return Math.max(0, (this.remainingMonths - 1)) * monthlyReward;
                    } else {
                        return this.remainingMonths * monthlyReward;
                    }
                },

                totalDailyShare() {
                    // ‰ΩøÁî®Ââ©‰ΩôÂàÜ‰∫´Âë®Êï∞ËÆ°ÁÆóÈÄªËæë
                    return 60 * this.remainingShareWeeks;
                },
                
                totalTrackingExchange() {
                    return this.trackingExchanged ? 0 : 5;
                },
                
                totalFriendshipExchange() {
                    return this.friendshipExchanged ? 0 : 3;
                },
                
                totalTrackingCertification() {
                    return 0; // ÈªÑÁ•®ÂÖëÊç¢‰∏ç‰∫ßÁîüÂºÇÊñπÊô∂ÔºåÂè™‰∫ßÁîüÊêúÁ¥¢‰ª§
                },
                
                totalTrackingCertificationTickets() {
                    return this.useTrackingCertification ? Math.floor(this.trackingCertificationCount / 8) : 0;
                },
                
                trainingRewards() {
                    let crystal = 0;
                    let tickets = 0;
                    
                    if (this.trainingModes.steady) {
                        crystal += 100;
                        tickets += 1;
                    }
                    if (this.trainingModes.fluctuating) {
                        crystal += 200;
                        tickets += 2;
                    }
                    if (this.trainingModes.outOfControl) {
                        crystal += 200;
                    }
                    if (this.trainingModes.crazy) {
                        crystal += 60;
                    }
                    
                    return {
                        crystal,
                        tickets,
                        total: crystal + (tickets * 180)
                    };
                },
                
                nightmareTotalRewards() {
                    const scoreRewards = this.calculateNightmareRewards();
                    return {
                        crystal: scoreRewards.crystal + this.nightmareSeaReward,
                        tickets: scoreRewards.tickets,
                        total: scoreRewards.crystal + this.nightmareSeaReward + (scoreRewards.tickets * 180)
                    };
                },
                
                dataGapRewards() {
                    let crystal = 0;
                    
                    if (this.dataGap.targets.missionComplete) crystal += 300;
                    if (this.dataGap.targets.missionCount) crystal += 120;
                    if (this.dataGap.targets.targetComplete) crystal += 140;
                    
                    if (this.dataGap.ratings.healing) crystal += 100;
                    if (this.dataGap.ratings.shield) crystal += 100;
                    if (this.dataGap.ratings.controlTime) crystal += 100;
                    if (this.dataGap.ratings.controlCount) crystal += 100;
                    if (this.dataGap.ratings.totalDamage) crystal += 100;
                    if (this.dataGap.ratings.coreDamage) crystal += 100;
                    if (this.dataGap.ratings.comprehensive) crystal += 100;
                    
                    return crystal;
                },

                // Êñ∞Â¢ûÊ®°ÂùóÂ•ñÂä±ËÆ°ÁÆó
                mainStoryRewards() {
                    let crystal = 0;
                    let tickets = 0;
                    
                    if (this.mainStory.chaosBeyondA) { crystal += 995; tickets += 1; }
                    if (this.mainStory.chaosBeyondB) { crystal += 1230; tickets += 1; }
                    if (this.mainStory.unownedCavernA) { crystal += 1175; tickets += 1; }
                    if (this.mainStory.unownedCavernB) { crystal += 1280; tickets += 1; }
                    if (this.mainStory.kiranSquareA) { crystal += 1265; tickets += 1; }
                    if (this.mainStory.kiranSquareB) { crystal += 1230; tickets += 1; }
                    if (this.mainStory.carnivalA) { crystal += 1230; tickets += 1; }
                    if (this.mainStory.carnivalB) { crystal += 935; tickets += 1; }
                    if (this.mainStory.refugeeCampA) { crystal += 1125; tickets += 1; }
                    if (this.mainStory.refugeeCampB) { crystal += 1195; tickets += 1; }
                    if (this.mainStory.muddyDarkTrapA) { crystal += 1230; tickets += 1; }
                    if (this.mainStory.muddyDarkTrapB) { crystal += 605; tickets += 1; }
                    if (this.mainStory.highTowerBlackRing) { crystal += 1980; tickets += 2; }
                    if (this.mainStory.darkSurgeA) { crystal += 1005; tickets += 1; }
                    if (this.mainStory.darkSurgeB) { crystal += 1005; tickets += 1; }
                    if (this.mainStory.goldFeastA) { crystal += 900; tickets += 1; }
                    if (this.mainStory.goldFeastB) { crystal += 1180; tickets += 1; }
                    
                    return {
                        crystal,
                        tickets,
                        total: crystal + (tickets * 180)
                    };
                },

                actionSummaryText() {
                    if (this.actionSummaryLevel >= 19) {
                        return "Â∑≤ÂÆåÊàêÂÖ®ÈÉ®Ë°åÂä®Á∫™Ë¶Å";
                    }
                    return this.actionSummaryList[this.actionSummaryLevel] || "01¬∑Ê∑∑Ê≤åÂΩºÂ≤∏";
                },

                // ÁãÑÊñØÊöóÂΩ±ÔºàEXÔºâÂ•ñÂä±ËÆ°ÁÆó
                darkShadowExRewards() {
                    let crystal = 0;
                    
                    if (this.darkShadowEx.chaosBeyond) crystal += 720;
                    if (this.darkShadowEx.unownedCavern) crystal += 720;
                    if (this.darkShadowEx.kiranSquare) crystal += 590;
                    if (this.darkShadowEx.carnival) crystal += 650;
                    if (this.darkShadowEx.highTowerBlackRing) crystal += 650;
                    if (this.darkShadowEx.luxuryFeastFog) crystal += 650;
                    if (this.darkShadowEx.drowningRainCity) crystal += 650;
                    if (this.darkShadowEx.goldFeast) crystal += 650;
                    
                    return crystal;
                },

                memoryStormRewards() {
                    let crystal = 0;
                    
                    if (this.memoryStorm.memoryAnomaly) crystal += 350;
                    if (this.memoryStorm.impressionAnomaly) crystal += 350;
                    if (this.memoryStorm.echoAnomaly) crystal += 350;
                    
                    return crystal;
                },

                pollutionNestRewards() {
                    let crystal = 0;
                    
                    if (this.pollutionNest.forbiddenZoneProbe) crystal += 350;
                    if (this.pollutionNest.extremeDomainSearch) crystal += 210;
                    
                    return crystal;
                },

                cleanupOperationRewards() {
                    let crystal = 0;
                    
                    if (this.cleanupOperation.goldRush) crystal += 350;
                    if (this.cleanupOperation.ominousSeed) crystal += 350;
                    
                    return crystal;
                },

                palmaRuinsRewards() {
                    let crystal = 0;
                    
                    if (this.palmaRuins.tenacious) crystal += 280;
                    if (this.palmaRuins.berserk) crystal += 280;
                    if (this.palmaRuins.mysterious) crystal += 280;
                    if (this.palmaRuins.precise) crystal += 280;
                    if (this.palmaRuins.supernatural) crystal += 280;
                    if (this.palmaRuins.inspiration) crystal += 280;
                    
                    return crystal;
                },

                // ËßíËâ≤ÂÖªÊàêÊ®°ÂùóÂ•ñÂä±ËÆ°ÁÆó
                characterDevelopmentRewards() {
                    let crystal = 0;
                    
                    crystal += this.characterDevelopment.tier3 * 180;
                    crystal += this.characterDevelopment.maxReverbS * 210;
                    crystal += this.characterDevelopment.maxReverbA * 60;
                    crystal += this.characterDevelopment.maxReverbB * 20;
                    crystal += this.characterDevelopment.reviewS * 200;
                    crystal += this.characterDevelopment.reviewA * 150;
                    
                    if (!this.characterDevelopment.haylaReviewed) {
                        crystal += 100;
                    }
                    
                    return {
                        crystal,
                        total: crystal
                    };
                },

                totalNewModuleRewards() {
                    return this.mainStoryRewards.total + 
                           this.darkShadowExRewards + 
                           this.memoryStormRewards + 
                           this.pollutionNestRewards + 
                           this.cleanupOperationRewards + 
                           this.palmaRuinsRewards +
                           this.characterDevelopmentRewards.total;
                },
                
                totalCrystalIncome() {
                    return this.dailyActiveTotal + 
                        this.totalWeeklyActive + 
                        this.totalDarkZone +
                        this.totalDarkZoneFirst +
                        this.totalEmotionDetectionForSummary +  // ‰ΩøÁî®Êñ∞ÁöÑËÆ°ÁÆóÂ±ûÊÄßÊÉÖÁª™Ê£ÄÊµã
                        this.totalSignInRewardForSummary +      // ‰ΩøÁî®Êñ∞ÁöÑËÆ°ÁÆóÂ±ûÊÄß
                        this.totalDailyShare +
                        (this.totalTrackingExchange * 180) +
                        (this.totalFriendshipExchange * 180) +
                        this.totalTrackingCertification +
                        this.trainingRewards.total +
                        this.nightmareTotalRewards.total +
                        this.dataGapRewards +
                        this.totalNewModuleRewards +
                        this.monthlyCardCrystal +           // Ê∑ªÂä†ÊúàÂç°ÂºÇÊñπÊô∂
                        this.actionSummaryCrystal +          // Ê∑ªÂä†Ë°åÂä®Á∫™Ë¶ÅÂºÇÊñπÊô∂
                        this.rechargeInspectionOrderCrystal + // Ê∑ªÂä†Ê∞™ÈáëÁõëÂØüÂØÜ‰ª§ÂºÇÊñπÊô∂
                        (this.disiActive ? this.disiRewardTotal : 0); // Ê∑ªÂä†ÁãÑÊñØÁõàÊª°ÈíµÂºÇÊñπÊô∂Ôºà‰ªÖÂú®ÊøÄÊ¥ªÊó∂Ôºâ
                },                
                totalSkinReserve() {
                    return (this.skinReserve.skin880 * 880) + 
                           (this.skinReserve.skin1280 * 1280) + 
                           (this.skinReserve.skin2580 * 2580);
                },
                
                currentPulls() {
                    const crystal = this.resources.crystal || 0;
                    const premiumCrystal = this.usePremiumCrystal ? (this.resources.premiumCrystal || 0) : 0;
                    const tickets = this.resources.tickets || 0;
                    
                    // Ê∑ªÂä†ÊúàÂç°ÁíÄÁí®Êô∂Ê∫êÂà∞ÂèØÁî®ËµÑÊ∫ê‰∏≠
                    const monthlyCardPremiumCrystal = this.monthlyCardPremiumCrystal;
                    
                    const availableCrystal = crystal + (premiumCrystal + monthlyCardPremiumCrystal) - this.totalSkinReserve + this.customAdjustment;
                    const crystalPulls = Math.floor(Math.max(0, availableCrystal) / 180);
                    return crystalPulls + tickets;
                },
                
                totalCrystal() {
                    const crystal = this.resources.crystal || 0;
                    const premiumCrystal = this.usePremiumCrystal ? (this.resources.premiumCrystal || 0) : 0;
                    const tickets = this.resources.tickets || 0;
                    
                    // Ê∑ªÂä†ÊúàÂç°ÁíÄÁí®Êô∂Ê∫êÂà∞ÂèØÁî®ËµÑÊ∫ê‰∏≠
                    const monthlyCardPremiumCrystal = this.monthlyCardPremiumCrystal;
                    
                    return crystal + (premiumCrystal + monthlyCardPremiumCrystal) + (tickets * 180) + this.totalCrystalIncome - this.totalSkinReserve + this.customAdjustment;
                },
                
                additionalPulls() {
                    return Math.floor(this.totalCrystalIncome / 180);
                },
                
                futurePulls() {
                    return this.currentPulls + this.additionalPulls;
                },
                
                totalCrystalSummary() {
                    const baseCrystal = this.resources.crystal || 0;
                    const totalIncome = this.totalCrystalIncome;
                    
                    return baseCrystal + totalIncome + this.customAdjustment;
                },

                // ÁíÄÁí®Êô∂Ê∫êÊÄªËÆ°ÔºàÂåÖÂê´ÁãÑÊñØÁõàÊª°ÈíµÁöÑÁíÄÁí®Êô∂Ê∫êÔºâ
                totalPremiumCrystalSummary() {
                    const basePremiumCrystal = this.resources.premiumCrystal || 0;
                    const monthlyCardPremium = this.monthlyCardPremiumCrystal;
                    const disiPremium = this.disiPremiumCrystal;
                    
                    return basePremiumCrystal + monthlyCardPremium + disiPremium - this.totalSkinReserve;
                },
                
                totalTicketsSummary() {
                    const baseTickets = this.resources.tickets || 0;
                    const additionalTickets = this.totalTrackingExchange + 
                                            this.totalFriendshipExchange + 
                                            this.totalEmotionDetectionTicketsForSummary +  // ‰ΩøÁî®Êñ∞ÁöÑËÆ°ÁÆóÂ±ûÊÄß
                                            this.totalSignInRewardTicketsForSummary +      // ‰ΩøÁî®Êñ∞ÁöÑËÆ°ÁÆóÂ±ûÊÄßÁ≠æÂà∞Â•ñÂä±
                                            this.totalTrackingCertificationTickets +
                                            this.trainingRewards.tickets +
                                            this.nightmareTotalRewards.tickets +
                                            this.mainStoryRewards.tickets +
                                            this.dailyInspectionOrderTickets +  // Ê∑ªÂä†Êó•Â∏∏ÁßØÁ¥ØÁõëÂØüÂØÜ‰ª§ÊêúÁ¥¢‰ª§
                                            this.rechargeInspectionOrderTickets + // Ê∑ªÂä†Ê∞™ÈáëÁõëÂØüÂØÜ‰ª§ÊêúÁ¥¢‰ª§
                                            this.treasureTickets; // Ê∑ªÂä†ËØ°ÁèëÁèçÂÆùÈ¶ÜÊêúÁ¥¢‰ª§
                    
                    return baseTickets + additionalTickets;
                },

                monthlyCardPremiumCrystal() {
                    if (!this.monthlyCardActive) return 0;
                    
                    // -1Ë°®Á§∫ÊèêÂâçË¥≠‰π∞ÔºåÁíÄÁí®Êô∂Ê∫ê‰∏∫0Ôºõ0Âèä‰ª•‰∏äÊåâÊ≠£Â∏∏ËÆ°ÁÆó
                    if (this.monthlyCardCount === -1) return 0;
                    
                    // Âü∫Á°ÄÊúàÂç°Áªô300ÔºåÊØèÈ¢ùÂ§ñË¥≠‰π∞1Âº†ÊúàÂç°È¢ùÂ§ñÁªô300
                    const baseCard = 1; // Âü∫Á°ÄÊúàÂç°
                    const additionalCards = Math.max(0, this.monthlyCardCount); // È¢ùÂ§ñË¥≠‰π∞ÁöÑÊúàÂç°Êï∞Èáè
                    
                    return (baseCard + additionalCards) * 300;
                },

                monthlyCardCrystal() {
                    if (!this.monthlyCardActive) return 0;
                    
                    const days = this.selectedDays;
                    const crystalPerDay = 60;
                    
                    // ËÆ°ÁÆóÊÄªÊúàÂç°Â§©Êï∞
                    let totalCardDays = 0;
                    
                    if (this.monthlyCardCount === -1) {
                        // -1ÔºöÊèêÂâçË¥≠‰π∞ÔºåÊúâ1Âº†ÊúàÂç°30Â§©
                        totalCardDays = 30;
                    } else if (this.monthlyCardCount >= 0) {
                        // 0ÔºöË¥≠‰π∞1Âº†ÊúàÂç°30Â§©Ôºå1ÔºöË¥≠‰π∞2Âº†ÊúàÂç°60Â§©Ôºå‰ª•Ê≠§Á±ªÊé®
                        totalCardDays = 30 * (this.monthlyCardCount + 1);
                    }
                    
                    // ÂÆûÈôÖÂèØÁî®ÁöÑÊúàÂç°Â§©Êï∞‰∏çËÉΩË∂ÖËøáÂâ©‰ΩôÂ§©Êï∞
                    const actualCardDays = Math.min(totalCardDays, days);
                    
                    return actualCardDays * crystalPerDay;
                },

                monthlyCardCost() {
                    if (!this.monthlyCardActive) return 0;
                    
                    // -1Ë°®Á§∫ÊèêÂâçË¥≠‰π∞Ôºå‰∏çÁÆóÂÖ•Ê∞™ÈáëÈáëÈ¢ù
                    if (this.monthlyCardCount === -1) return 0;
                    
                    // 0Ë°®Á§∫Ë¥≠‰π∞1Âº†Ôºå1Ë°®Á§∫Ë¥≠‰π∞2Âº†Ôºå‰ª•Ê≠§Á±ªÊé®
                    const totalCards = this.monthlyCardCount + 1;
                    return totalCards * 30; // ÊØèÂº†ÊúàÂç°30RMB
                },

                inspectionOrderCost() {
                    if (!this.inspectionOrderActive) return 0;
                    
                    // -1Ë°®Á§∫ÊèêÂâçË¥≠‰π∞Ôºå‰∏çÁÆóÂÖ•Ê∞™ÈáëÈáëÈ¢ù
                    if (this.inspectionOrderCount === -1) return 0;
                    
                    // 0Ë°®Á§∫Ë¥≠‰π∞1ÊúüÔºå1Ë°®Á§∫Ë¥≠‰π∞2ÊúüÔºå‰ª•Ê≠§Á±ªÊé®
                    const totalPeriods = this.inspectionOrderCount + 1;
                    return totalPeriods * 68; // ÊØèÊúü68RMB
                },

                disiCost() {
                    // Âè™ÊúâÂΩìÊåâÈíÆÊøÄÊ¥ª‰∏îÊú™È¢ÑÂÖàË¥≠‰π∞Êó∂ÊâçËÆ°ÂÖ•98RMB
                    if (this.disiActive && !this.disiPrePurchased) {
                        return 98;
                    }
                    return 0;
                },

                treasureCost() {
                    // Âè™ÊúâÂΩìÊåâÈíÆÊøÄÊ¥ª‰∏îÊú™È¢ÑÂÖàË¥≠‰π∞Êó∂ÊâçËÆ°ÂÖ•88RMB
                    if (this.treasureActive && !this.treasurePrePurchased) {
                        return 88;
                    }
                    return 0;
                },            

                totalRechargeCost() {
                    return this.monthlyCardCost + this.inspectionOrderCost + this.disiCost + this.treasureCost;
                },

                inspectionOrderCrystal() {
                    // Â¶ÇÊûúÊªëÂùóÂú®55Á∫ßÔºå‰ª£Ë°®Êú¨ÊúüÂ•ñÂä±Â∑≤È¢ÜÂÆåÔºåÂè™ËÆ°ÁÆóËøáÂæÄÊúüÊï∞
                    if (this.inspectionOrderLevel >= 55) {
                        const periods = this.calculateInspectionPeriods - 1;
                        const totalPerPeriod = 200 + 680; // ÊØèÊúüÊÄªÂÖ±880ÂºÇÊñπÊô∂
                        return periods * totalPerPeriod;
                    }
                    
                    // Êó•Â∏∏ÁßØÁ¥ØÊ®°Âùó‰∏≠ÁöÑÁõëÂØüÂØÜ‰ª§Âè™ËÆ°ÁÆóÂºÇÊñπÊô∂ÂíåÊêúÁ¥¢‰ª§Ôºå‰∏çËÆ°ÁÆóRMB
                    let crystal = 0;
                    // ËÆ°ÁÆóÂ§ß‰∫éÂΩìÂâçÁ≠âÁ∫ßÁöÑÂ•ñÂä±ÔºàÊú¨ÊúüÂâ©‰ΩôÂ•ñÂä±Ôºâ
                    if (this.inspectionOrderLevel < 30) crystal += 200;
                    if (this.inspectionOrderLevel < 50) crystal += 680;
                    
                    // ÊÄªÂ•ñÂä± = Êú¨ÊúüÂâ©‰ΩôÂ•ñÂä± + (ÊúüÊï∞-1) * ÊØèÊúüÊÄªÂ•ñÂä±
                    const periods = this.calculateInspectionPeriods;
                    const totalPerPeriod = 200 + 680; // ÊØèÊúüÊÄªÂÖ±880ÂºÇÊñπÊô∂
                    
                    return crystal + (periods - 1) * totalPerPeriod;
                },

                inspectionOrderTickets() {
                    // Â¶ÇÊûúÊªëÂùóÂú®55Á∫ßÔºå‰ª£Ë°®Êú¨ÊúüÂ•ñÂä±Â∑≤È¢ÜÂÆåÔºåÂè™ËÆ°ÁÆóËøáÂæÄÊúüÊï∞
                    if (this.inspectionOrderLevel >= 55) {
                        const periods = this.calculateInspectionPeriods - 1;
                        const totalPerPeriod = 6; // ÊØèÊúüÊÄªÂÖ±6ÊêúÁ¥¢‰ª§
                        return periods * totalPerPeriod;
                    }
                    
                    // Êó•Â∏∏ÁßØÁ¥ØÊ®°Âùó‰∏≠ÁöÑÁõëÂØüÂØÜ‰ª§Âè™ËÆ°ÁÆóÂºÇÊñπÊô∂ÂíåÊêúÁ¥¢‰ª§Ôºå‰∏çËÆ°ÁÆóRMB
                    let tickets = 0;
                    const levels = [5, 15, 25, 35, 45, 55];
                    
                    // ËÆ°ÁÆóÂ§ß‰∫éÂΩìÂâçÁ≠âÁ∫ßÁöÑÂ•ñÂä±ÔºàÊú¨ÊúüÂâ©‰ΩôÂ•ñÂä±Ôºâ
                    for (const level of levels) {
                        if (this.inspectionOrderLevel < level) {
                            tickets += 1; // Êó•Â∏∏ÁßØÁ¥ØÊ®°ÂùóÂõ∫ÂÆö‰∏∫ÊôÆÈÄöÁõëÂØüÂØÜ‰ª§ÔºåÊØèÁ∫ß1Âº†
                        }
                    }
                    
                    // ÊÄªÂ•ñÂä± = Êú¨ÊúüÂâ©‰ΩôÂ•ñÂä± + (ÊúüÊï∞-1) * ÊØèÊúüÊÄªÂ•ñÂä±
                    const periods = this.calculateInspectionPeriods;
                    const totalPerPeriod = 6; // ÊØèÊúüÊÄªÂÖ±6ÊêúÁ¥¢‰ª§
                    
                    return tickets + (periods - 1) * totalPerPeriod;
                },

                inspectionOrderCost() {
                    if (!this.inspectionOrderActive) return 0;
                    
                    // Ë¥üÊï∞‰ª£Ë°®Â∑≤ÊèêÂâçË¥≠‰π∞Ôºå‰∏çÁÆóÂÖ•Ê∞™ÈáëÈáëÈ¢ù
                    if (this.inspectionOrderCount < 0) return 0;
                    
                    // Âü∫Á°Ä1Êúü + È¢ùÂ§ñË¥≠‰π∞ÊúüÊï∞
                    const totalPeriods = 1 + Math.max(0, this.inspectionOrderCount);
                    return totalPeriods * 68;
                },

                rechargeInspectionOrderCrystal() {
                    if (!this.inspectionOrderActive) return 0;
                    
                    // Áõ¥Êé•ËÆ°ÁÆóÊÄªÊúüÊï∞ÔºåÈÅøÂÖçÊñπÊ≥ïË∞ÉÁî®
                    const basePeriods = 1;
                    const additionalPeriods = Math.max(0, this.inspectionOrderCount);
                    const totalPeriods = basePeriods + additionalPeriods;
                    
                    // ÊØèÊúü880ÂºÇÊñπÊô∂
                    return totalPeriods * 880;
                },

                rechargeInspectionOrderTickets() {
                    if (!this.inspectionOrderActive) return 0;
                    
                    // Áõ¥Êé•ËÆ°ÁÆóÊÄªÊúüÊï∞ÔºåÈÅøÂÖçÊñπÊ≥ïË∞ÉÁî®
                    const basePeriods = 1;
                    const additionalPeriods = Math.max(0, this.inspectionOrderCount);
                    const totalPeriods = basePeriods + additionalPeriods;
                    
                    // ÊØèÊúü6ÊêúÁ¥¢‰ª§
                    return totalPeriods * 6;
                },

                // È´òÁ∫ßÁõëÂØüÂØÜ‰ª§ÂºÇÊñπÊô∂Êï∞ÈáèËÆ°ÁÆó
                inspectionOrderCrystalAmount() {
                    if (!this.inspectionOrderActive) return 0;
                    
                    // ËÆ°ÁÆóÊÄªÊúüÊï∞
                    const basePeriods = 1; // Âü∫Á°Ä1Êúü
                    const additionalPeriods = Math.max(0, this.inspectionOrderCount); // È¢ùÂ§ñË¥≠‰π∞ÊúüÊï∞
                    const totalPeriods = basePeriods + additionalPeriods;
                    
                    // ÊØèÊúü880ÂºÇÊñπÊô∂
                    return totalPeriods * 880;
                },

                // È´òÁ∫ßÁõëÂØüÂØÜ‰ª§ÊêúÁ¥¢‰ª§Êï∞ÈáèËÆ°ÁÆó
                inspectionOrderTicketAmount() {
                    if (!this.inspectionOrderActive) return 0;
                    
                    // ËÆ°ÁÆóÊÄªÊúüÊï∞
                    const basePeriods = 1; // Âü∫Á°Ä1Êúü
                    const additionalPeriods = Math.max(0, this.inspectionOrderCount); // È¢ùÂ§ñË¥≠‰π∞ÊúüÊï∞
                    const totalPeriods = basePeriods + additionalPeriods;
                    
                    // ÊØèÊúü6ÊêúÁ¥¢‰ª§
                    return totalPeriods * 6;
                },

                calculateInspectionPeriods() {
                    // ÁõëÂØüÂØÜ‰ª§Âõ∫ÂÆöÂë®ÊúüËÆ°ÁÆóÔºöÊØè6Âë®1Êúü
                    // ÂΩìÂâçÊúüÔºö10.6-11.17Ôºå‰∏ã‰∏ÄÊúüÔºö11.17-12.29
                    
                    const today = new Date();
                    const versionDate = this.selectedTime === 'nextVersion' 
                        ? new Date(2025, 10, 20)  // 2025Âπ¥11Êúà20Êó•
                        : new Date(2026, 1, 17);  // 2026Âπ¥2Êúà17Êó•
                    
                    // ÂØÜ‰ª§ÂºÄÂßãÊó•ÊúüÔºàÂΩìÂâçÂë®ÊúüÂºÄÂßãÔºâ
                    const firstOrderStart = new Date(2025, 9, 6); // 2025Âπ¥10Êúà6Êó•
                    
                    // ËÆ°ÁÆó‰ªéÁ¨¨‰∏Ä‰∏™ÂØÜ‰ª§ÂºÄÂßãÂà∞ÁõÆÊ†áÊó•ÊúüÁöÑÂë®Êï∞
                    const diffTime = versionDate - firstOrderStart;
                    const diffWeeks = Math.ceil(diffTime / (1000 * 60 * 60 * 24 * 7));
                    
                    // ÊØè6Âë®‰∏∫1ÊúüÔºåËÆ°ÁÆóÊúüÊï∞ÔºàÂêë‰∏äÂèñÊï¥Ôºâ
                    const totalPeriods = Math.ceil(diffWeeks / 6);
                    
                    // ËÆ°ÁÆó‰ªé‰ªäÂ§©Âà∞Á¨¨‰∏Ä‰∏™ÂØÜ‰ª§ÂºÄÂßãÁöÑÂë®Êï∞ÔºåÁ°ÆÂÆöÂΩìÂâçÊúüÊï∞
                    const currentDiffTime = today - firstOrderStart;
                    const currentDiffWeeks = Math.ceil(currentDiffTime / (1000 * 60 * 60 * 24 * 7));
                    const currentPeriod = Math.ceil(currentDiffWeeks / 6);
                    
                    // ÁªèÂéÜÁöÑÊúüÊï∞ = ÊÄªÊúüÊï∞ - ÂΩìÂâçÊúü + 1
                    const periods = totalPeriods - currentPeriod + 1;
                    
                    return Math.max(1, periods); // Ëá≥Â∞ë1Êúü
                },
                // Êó•Â∏∏ÁßØÁ¥ØÊ®°ÂùóÁöÑÂºÇÊñπÊô∂ËÆ°ÁÆó
                dailyInspectionOrderCrystal() {
                    let crystal = 0;
                    // ËÆ°ÁÆóÂ§ß‰∫éÂΩìÂâçÁ≠âÁ∫ßÁöÑÂ•ñÂä±ÔºàÊú¨ÊúüÂâ©‰ΩôÂ•ñÂä±Ôºâ
                    if (this.dailyInspectionOrderLevel < 30) crystal += 200;
                    if (this.dailyInspectionOrderLevel < 50) crystal += 680;
                    
                    // ÊÄªÂ•ñÂä± = Êú¨ÊúüÂâ©‰ΩôÂ•ñÂä± + (ÊúüÊï∞-1) * ÊØèÊúüÊÄªÂ•ñÂä±
                    const periods = this.calculateInspectionPeriods;
                    const totalPerPeriod = 200 + 680; // ÊØèÊúüÊÄªÂÖ±880ÂºÇÊñπÊô∂
                    
                    return crystal + (periods - 1) * totalPerPeriod;
                },

                // Ê∞™ÈáëÊ®°ÂùóÁöÑÂºÇÊñπÊô∂ËÆ°ÁÆó
                rechargeInspectionOrderCrystal() {
                    if (!this.inspectionOrderActive) return 0;
                    
                    // Áõ¥Êé•ËÆ°ÁÆóÊÄªÊúüÊï∞ÔºåÈÅøÂÖçÊñπÊ≥ïË∞ÉÁî®
                    const basePeriods = 1;
                    const additionalPeriods = Math.max(0, this.inspectionOrderCount);
                    const totalPeriods = basePeriods + additionalPeriods;
                    
                    // ÊØèÊúü880ÂºÇÊñπÊô∂
                    return totalPeriods * 880;
                },

                rechargeInspectionOrderTickets() {
                    if (!this.inspectionOrderActive) return 0;
                    
                    // Áõ¥Êé•ËÆ°ÁÆóÊÄªÊúüÊï∞ÔºåÈÅøÂÖçÊñπÊ≥ïË∞ÉÁî®
                    const basePeriods = 1;
                    const additionalPeriods = Math.max(0, this.inspectionOrderCount);
                    const totalPeriods = basePeriods + additionalPeriods;
                    
                    // ÊØèÊúü6ÊêúÁ¥¢‰ª§
                    return totalPeriods * 6;
                },

                rechargeInspectionOrderCost() {  // ÊîπÂêçÈÅøÂÖçÂÜ≤Á™Å
                    if (!this.inspectionOrderActive) return 0;
                    
                    // Ë¥üÊï∞‰ª£Ë°®Â∑≤ÊèêÂâçË¥≠‰π∞Ôºå‰∏çÁÆóÂÖ•Ê∞™ÈáëÈáëÈ¢ù
                    if (this.inspectionOrderCount < 0) return 0;
                    
                    // Âü∫Á°Ä1Êúü + È¢ùÂ§ñË¥≠‰π∞ÊúüÊï∞
                    const totalPeriods = 1 + Math.max(0, this.inspectionOrderCount);
                    return totalPeriods * 68;
                },

                // ÁãÑÊñØÁõàÊª°ÈíµÂ•ñÂä±ËÆ°ÁÆó
                disiRewardTotal() {
                    // ËÆ°ÁÆóÂ§ß‰∫éÂΩìÂâçÁ≠âÁ∫ßÁöÑÊâÄÊúâÂ•ñÂä±ÊÄªÂíå
                    let total = 0;
                    for (const reward of this.disiRewards) {
                        if (reward.level <= this.disiLevel) {
                            total += reward.crystal;
                        }
                    }
                    return total;
                },

                // ÁãÑÊñØÁõàÊª°ÈíµÁíÄÁí®Êô∂Ê∫êËÆ°ÁÆó
                disiPremiumCrystal() {
                    // Âè™ÊúâÂΩìÊåâÈíÆÊøÄÊ¥ª‰∏îÊú™È¢ÑÂÖàË¥≠‰π∞Êó∂ÊâçÊòæÁ§∫980
                    if (this.disiActive && !this.disiPrePurchased) {
                        return 980;
                    }
                    return 0;
                },                

                // ËØ°ÁèëÁèçÂÆùÈ¶ÜÊêúÁ¥¢‰ª§ËÆ°ÁÆó
                treasureTickets() {
                    // Âè™ÊúâÂΩìÊåâÈíÆÊøÄÊ¥ªÊó∂ÊâçÊòæÁ§∫10ÊêúÁ¥¢‰ª§
                    if (this.treasureActive) {
                        return 10;
                    }
                    return 0;
                },

            },
            watch: {
                resources: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                selectedTime() {
                    // ÂΩìÂàáÊç¢Êó∂Èó¥Êó∂ÔºåÊ£ÄÊü•Âπ∂Ë∞ÉÊï¥È´òÁ∫ßÁõëÂØüÂØÜ‰ª§Ë¥≠‰π∞Êï∞Èáè
                    const maxLimit = this.calculateInspectionPeriods - 1;
                    if (this.inspectionOrderCount > maxLimit) {
                        this.inspectionOrderCount = maxLimit;
                    }
                    this.saveToLocalStorage();
                },
                calculateToPoolEnd() {
                    this.saveToLocalStorage();
                },
                weeklyCompleted() {
                    this.saveToLocalStorage();
                },
                darkZoneSweepOnly() {
                    this.saveToLocalStorage();
                },
                darkZoneCompleted() {
                    this.saveToLocalStorage();
                },
                darkZoneFirstCompleted() {
                    this.saveToLocalStorage();
                },
                trackingExchanged() {
                    this.saveToLocalStorage();
                },
                friendshipExchanged() {
                    this.saveToLocalStorage();
                },
                usePremiumCrystal() {
                    this.saveToLocalStorage();
                },
                skinReserve: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                customAdjustment() {
                    this.saveToLocalStorage();
                },
                emotionDetectionCompleted() {
                    this.saveToLocalStorage();
                },
                signInRewardCompleted() {
                    this.saveToLocalStorage();
                },
                dailyShareCompleted() {
                    this.saveToLocalStorage();
                },
                trackingCertificationCount() {
                    this.saveToLocalStorage();
                },
                useTrackingCertification() {
                    this.saveToLocalStorage();
                },
                trainingModes: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                nightmareScore() {
                    this.saveToLocalStorage();
                },
                nightmareSeaCompleted() {
                    this.saveToLocalStorage();
                },
                dataGap: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                // Êñ∞Â¢ûÊ®°ÂùóÁöÑwatch
                mainStory: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                darkShadowEx: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                memoryStorm: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                pollutionNest: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                cleanupOperation: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                palmaRuins: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                // ËßíËâ≤ÂÖªÊàêÊ®°ÂùóÁöÑwatch
                characterDevelopment: {
                    handler(newValue) {
                        this.saveToLocalStorage();
                    },
                    deep: true
                },
                monthlyCardCount() {
                    this.saveToLocalStorage();
                },
                
                monthlyCardActive() {
                    this.saveToLocalStorage();
                },

                inspectionOrderActive() {
                    this.saveToLocalStorage();
                },
                inspectionOrderCount() {
                    this.saveToLocalStorage();
                },

                rechargeInspectionOrderLevel() {
                    this.saveToLocalStorage();
                },

                actionSummaryLevel() {
                    this.saveToLocalStorage();
                },

                disiLevel() {
                    this.saveToLocalStorage();
                },

                disiActive() {
                    this.saveToLocalStorage();
                },

                disiPrePurchased() {
                    this.saveToLocalStorage();
                },

                treasureActive() {
                    this.saveToLocalStorage();
                },

                treasurePrePurchased() {
                    this.saveToLocalStorage();
                },

            },
            methods: {
                saveToLocalStorage() {
                    const dataToSave = {
                        resources: this.resources,
                        selectedTime: this.selectedTime,
                        calculateToPoolEnd: this.calculateToPoolEnd,
                        weeklyCompleted: this.weeklyCompleted,
                        darkZoneSweepOnly: this.darkZoneSweepOnly,
                        darkZoneCompleted: this.darkZoneCompleted,
                        darkZoneFirstCompleted: this.darkZoneFirstCompleted,
                        trackingExchanged: this.trackingExchanged,
                        friendshipExchanged: this.friendshipExchanged,
                        usePremiumCrystal: this.usePremiumCrystal,
                        skinReserve: this.skinReserve,
                        customAdjustment: this.customAdjustment,
                        emotionDetectionCompleted: this.emotionDetectionCompleted,
                        signInRewardCompleted: this.signInRewardCompleted,
                        dailyShareCompleted: this.dailyShareCompleted,
                        trackingCertificationCount: this.trackingCertificationCount,
                        useTrackingCertification: this.useTrackingCertification,
                        trainingModes: this.trainingModes,
                        nightmareScore: this.nightmareScore,
                        nightmareSeaCompleted: this.nightmareSeaCompleted,
                        dataGap: this.dataGap,
                        // Êñ∞Â¢ûÊ®°ÂùóÊï∞ÊçÆ‰øùÂ≠ò
                        mainStory: this.mainStory,
                        darkShadowEx: this.darkShadowEx,
                        memoryStorm: this.memoryStorm,
                        pollutionNest: this.pollutionNest,
                        cleanupOperation: this.cleanupOperation,
                        palmaRuins: this.palmaRuins,
                        // ËßíËâ≤ÂÖªÊàêÊ®°ÂùóÊï∞ÊçÆ‰øùÂ≠ò
                        characterDevelopment: this.characterDevelopment,
                        monthlyCardCount: this.monthlyCardCount,
                        monthlyCardActive: this.monthlyCardActive,
                        // ‚úÖ Á°Æ‰øùËøô‰∏ÄË°åÂ≠òÂú®ÔºÅ
                        inspectionOrderActive: this.inspectionOrderActive,
                        inspectionOrderLevel: this.inspectionOrderLevel,
                        actionSummaryLevel: this.actionSummaryLevel,
                        inspectionOrderCount: this.inspectionOrderCount,
                        dailyInspectionOrderLevel: this.dailyInspectionOrderLevel,
                        rechargeInspectionOrderLevel: this.rechargeInspectionOrderLevel,
                        disiLevel: this.disiLevel,  // Ê∑ªÂä†ÁãÑÊñØÁõàÊª°ÈíµÁ≠âÁ∫ß
                        disiActive: this.disiActive, // Ê∑ªÂä†ÁãÑÊñØÁõàÊª°ÈíµÊøÄÊ¥ªÁä∂ÊÄÅ
                        disiPrePurchased: this.disiPrePurchased, // Ê∑ªÂä†ÁãÑÊñØÁõàÊª°ÈíµÈ¢ÑË¥≠‰π∞
                        treasureActive: this.treasureActive, // Ê∑ªÂä†ËØ°ÁèëÁèçÂÆùÈ¶ÜÊøÄÊ¥ªÁä∂ÊÄÅ
                        treasurePrePurchased: this.treasurePrePurchased, // Ê∑ªÂä†ËØ°ÁèëÁèçÂÆùÈ¶ÜÈ¢ÑË¥≠‰π∞Áä∂ÊÄÅ
                    };
                    
                    try {
                        localStorage.setItem('gachaCalculatorData', JSON.stringify(dataToSave));
                    } catch (e) {
                        console.error('‰øùÂ≠òÊï∞ÊçÆÂ§±Ë¥•:', e);
                    }
                },

                toggleSection(section) {
                    this.sections[section] = !this.sections[section];
                },
                
                adjustSkinCount(price, change) {
                    const skinKey = `skin${price}`;
                    if (this.skinReserve[skinKey] !== undefined) {
                        const newValue = this.skinReserve[skinKey] + change;
                        if (newValue >= 0) {
                            this.skinReserve[skinKey] = newValue;
                        }
                    }
                },

                validateCertificationInput() {
                    // Á°Æ‰øùÂÄº‰∏∫Êï¥Êï∞‰∏îÈùûË¥üÊï∞
                    if (this.trackingCertificationCount < 0) {
                        this.trackingCertificationCount = 0;
                    }
                    if (this.trackingCertificationCount !== null && this.trackingCertificationCount !== undefined) {
                        this.trackingCertificationCount = Math.floor(this.trackingCertificationCount);
                    }
                },
                
                toggleTrainingMode(mode) {
                    this.trainingModes[mode] = !this.trainingModes[mode];
                },
                
                toggleDataGap(category, type) {
                    this.dataGap[category][type] = !this.dataGap[category][type];
                },

                // Êñ∞Â¢ûÊ®°ÂùóÊñπÊ≥ï
                toggleMainStory(type) {
                    this.mainStory[type] = !this.mainStory[type];
                },

                // ÁãÑÊñØÊöóÂΩ±ÔºàEXÔºâÊñπÊ≥ï
                toggleDarkShadowEx(type) {
                    this.darkShadowEx[type] = !this.darkShadowEx[type];
                },

                toggleMemoryStorm(type) {
                    this.memoryStorm[type] = !this.memoryStorm[type];
                },

                togglePollutionNest(type) {
                    this.pollutionNest[type] = !this.pollutionNest[type];
                },

                toggleCleanupOperation(type) {
                    this.cleanupOperation[type] = !this.cleanupOperation[type];
                },

                togglePalmaRuins(type) {
                    this.palmaRuins[type] = !this.palmaRuins[type];
                },
                
                // ËßíËâ≤ÂÖªÊàêÊ®°ÂùóÊñπÊ≥ï
                toggleHaylaReview() {
                    this.characterDevelopment.haylaReviewed = !this.characterDevelopment.haylaReviewed;
                },
                
                adjustCharacterDev(type, change) {
                    // Á°Æ‰øùÂΩìÂâçÂÄºÊòØÊï∞Â≠óÁ±ªÂûã
                    const currentValue = Number(this.characterDevelopment[type]) || 0;
                    const newValue = currentValue + change;
                    
                    // Á°Æ‰øùÊñ∞ÂÄº‰∏çÂ∞è‰∫é0
                    if (newValue >= 0) {
                        this.characterDevelopment[type] = newValue;
                    }
                },

                calculateNightmareRewards() {
                    let totalCrystal = 0;
                    let totalTickets = 0;
                    
                    for (const reward of this.nightmareRewards) {
                        // ‰øÆÊîπÔºöÂè™ËÆ°ÁÆóÂ§ß‰∫éÂΩìÂâçÁßØÂàÜÁöÑÂ•ñÂä±
                        if (this.nightmareScore < reward.score) {
                            totalCrystal += reward.crystal;
                            totalTickets += reward.tickets;
                        }
                    }
                    
                    return {
                        crystal: totalCrystal,
                        tickets: totalTickets
                    };
                },

                validateInput(type) {
                    // Á°Æ‰øùÂÄº‰∏∫Êï¥Êï∞‰∏îÈùûË¥üÊï∞
                    if (this.resources[type] < 0) {
                        this.resources[type] = 0;
                    }
                    if (this.resources[type] !== null && this.resources[type] !== undefined) {
                        this.resources[type] = Math.floor(this.resources[type]);
                    }
                },
                
                adjustMonthlyCard(change) {
                    const newValue = this.monthlyCardCount + change;
                    
                    // Ê£ÄÊü•ÊòØÂê¶‰ªé5Â¢ûÂä†Âà∞6
                    if (this.monthlyCardCount === 5 && change === 1) {
                        this.showAutoCloseAlert("Ââ©‰ΩôÊúâÊïàÊó•Êúü>150Â§©Êó∂Â∞ÜÊó†Ê≥ïÁªßÁª≠Ë¥≠‰π∞ÊúàÂç°");
                        return;
                    }
                    
                    // ÈôêÂà∂Âè™ËÉΩÂú®-1Âà∞5‰πãÈó¥ÔºàÁé∞Âú®ÂÖÅËÆ∏Âà∞5Ôºâ
                    if (newValue >= -1 && newValue <= 5) {
                        this.monthlyCardCount = newValue;
                    }
                },

                showAutoCloseAlert(message) {
                    // ÂàõÂª∫ÊèêÁ§∫ÂÖÉÁ¥†
                    const alertDiv = document.createElement('div');
                    alertDiv.style.cssText = `
                        position: fixed;
                        top: 50%;
                        left: 50%;
                        transform: translate(-50%, -50%);
                        background: rgba(0, 0, 0, 0.8);
                        color: white;
                        padding: 15px 25px;
                        border-radius: 8px;
                        z-index: 10000;
                        font-size: 14px;
                        text-align: center;
                    `;
                    alertDiv.textContent = message;
                    
                    // Ê∑ªÂä†Âà∞È°µÈù¢
                    document.body.appendChild(alertDiv);
                    
                    // 3ÁßíÂêéËá™Âä®ÁßªÈô§
                    setTimeout(() => {
                        if (alertDiv.parentNode) {
                            alertDiv.parentNode.removeChild(alertDiv);
                        }
                    }, 3000);
                },

                toggleMonthlyCard() {
                    this.monthlyCardActive = !this.monthlyCardActive;
                },

                // È´òÁ∫ßÁõëÂØüÂØÜ‰ª§È¢ùÂ§ñË¥≠‰π∞ÊåâÈíÆÈôêÂà∂Ôºö
                adjustInspectionOrder(change) {
                    const newValue = this.inspectionOrderCount + change;
                    
                    // ‰∏äÈôê‰∏∫ÁªèÂéÜÊúüÊï∞-1
                    const maxLimit = this.calculateInspectionPeriods - 1;
                    
                    // Ê£ÄÊü•ÊòØÂê¶ËææÂà∞‰∏äÈôê
                    if (newValue > maxLimit) {
                        this.showAutoCloseAlert(`ÊåáÂÆöÊó∂Èó¥ÂÜÖ‰ªÖÁªèÂéÜ${maxLimit + 1}ÊúüÁõëÂØüÂØÜ‰ª§`);
                        return;
                    }
                    
                    // ÈôêÂà∂Âú®-1Âà∞maxLimit‰πãÈó¥
                    if (newValue >= -1 && newValue <= maxLimit) {
                        this.inspectionOrderCount = newValue;
                    }
                },

                toggleInspectionOrder() {
                    this.inspectionOrderActive = !this.inspectionOrderActive;
                },

                calculateDisplayDays(timeType) {
                    const baseDays = timeType === 'nextVersion' ? this.daysToNextVersion : this.daysToNewYear;
                    return this.calculateToPoolEnd ? baseDays + (this.versionWeeks * 7) : baseDays;
                },

                // ÁãÑÊñØÁõàÊª°ÈíµÊªëÂùóÂê∏ÈôÑÂà∞ÊåáÂÆöÊå°‰Ωç
                snapDisiLevel() {
                    const levels = [0, 5, 10, 15, 20, 25, 30, 35, 40, 42, 44, 46, 48, 50];
                    let closestLevel = levels[0];
                    let minDiff = Math.abs(this.disiLevel - levels[0]);
                    
                    for (let i = 1; i < levels.length; i++) {
                        const diff = Math.abs(this.disiLevel - levels[i]);
                        if (diff < minDiff) {
                            minDiff = diff;
                            closestLevel = levels[i];
                        }
                    }
                    
                    // Âè™ÊúâÂΩìÂΩìÂâçÂÄº‰∏çÁ≠â‰∫éÊúÄÊé•ËøëÁöÑÊå°‰ΩçÊó∂ÊâçÊõ¥Êñ∞
                    if (this.disiLevel !== closestLevel) {
                        this.disiLevel = closestLevel;
                    }
                },

                // ÂàáÊç¢ÁãÑÊñØÁõàÊª°ÈíµÊøÄÊ¥ªÁä∂ÊÄÅ
                toggleDisi() {
                    this.disiActive = !this.disiActive;
                    // Â¶ÇÊûúÂÖ≥Èó≠ÊåâÈíÆÔºåÈáçÁΩÆÊªëÂùóÂà∞0Á∫ß
                    if (!this.disiActive) {
                        this.disiLevel = 0;
                        this.disiPrePurchased = false;
                    }
                },

                // ÂàáÊç¢ËØ°ÁèëÁèçÂÆùÈ¶ÜÊøÄÊ¥ªÁä∂ÊÄÅ
                toggleTreasure() {
                    this.treasureActive = !this.treasureActive;
                    // Â¶ÇÊûúÂÖ≥Èó≠ÊåâÈíÆÔºåÂÖ≥Èó≠È¢ÑË¥≠‰π∞
                    if (!this.treasureActive) {
                        this.treasurePrePurchased = false;
                    }
                },                

            }
        })

        // Ê∑ªÂä†ÈîôËØØÂ§ÑÁêÜ
        try {
            app.mount('#app');
        } catch (error) {
            console.error('È°µÈù¢Âä†ËΩΩÂ§±Ë¥•:', error);
            // ÊòæÁ§∫ÁÆÄÂçïÈîôËØØ‰ø°ÊÅØ
            document.getElementById('app').innerHTML = `
                <div style="padding: 20px; text-align: center;">
                    <h2>‚ö†Ô∏è È°µÈù¢Âä†ËΩΩÈÅáÂà∞ÈóÆÈ¢ò</h2>
                    <p>ËØ∑Â∞ùËØïÔºö</p>
                    <button onclick="localStorage.removeItem('gachaCalculatorData'); location.reload();" 
                            style="padding: 10px; margin: 5px; background: #1890ff; color: white; border: none; border-radius: 5px;">
                        Ê∏ÖÈô§Êï∞ÊçÆÂπ∂Âà∑Êñ∞
                    </button>
                    <button onclick="location.reload()" 
                            style="padding: 10px; margin: 5px; background: #ccc; border: none; border-radius: 5px;">
                        Áõ¥Êé•Âà∑Êñ∞
                    </button>
                </div>
            `;
        }

    </script>
</body>
</html>